import{S as a,i as t,s,e,k as c,t as r,D as o,c as l,a as i,n,g as h,d as f,M as p,b as d,f as u,E as v,I as m,O as g,h as E,R as x,F as S,N as I,G as k,H as O}from"../chunks/vendor-a95f158c.js";import{c as $}from"../chunks/stores-30180c6b.js";function b(a,t,s){const e=a.slice();return e[8]=t[s],e}function F(a){let t,s,c="$"+parseFloat(a[8].price).toFixed(2);return{c(){t=e("p"),s=r(c),this.h()},l(a){t=l(a,"P",{class:!0});var e=i(t);s=h(e,c),e.forEach(f),this.h()},h(){d(t,"class","price")},m(a,e){u(a,t,e),v(t,s)},p(a,t){4&t&&c!==(c="$"+parseFloat(a[8].price).toFixed(2))&&E(s,c)},d(a){a&&f(t)}}}function V(a){let t,s,c="$"+(a[8].price-a[8].rebate).toFixed(2);return{c(){t=e("p"),s=r(c),this.h()},l(a){t=l(a,"P",{class:!0});var e=i(t);s=h(e,c),e.forEach(f),this.h()},h(){d(t,"class","price")},m(a,e){u(a,t,e),v(t,s)},p(a,t){4&t&&c!==(c="$"+(a[8].price-a[8].rebate).toFixed(2))&&E(s,c)},d(a){a&&f(t)}}}function y(a){let t,s,S,I,k,O,$,b,y,P,D,T,C,N,w,j,H,M,G,J,z,A,B=a[8].name+" ("+a[8].amount+")";function Q(a,t){return 0!=a[8].rebate?V:F}let R=Q(a),U=R(a);return{c(){t=e("div"),s=e("img"),I=c(),k=e("div"),O=e("p"),$=r(B),b=c(),U.c(),y=c(),P=e("div"),D=e("span"),T=r("+"),C=c(),N=e("span"),w=r("-"),j=c(),H=o("svg"),M=o("path"),G=o("path"),J=c(),this.h()},l(a){t=l(a,"DIV",{class:!0});var e=i(t);s=l(e,"IMG",{src:!0,alt:!0,class:!0}),I=n(e),k=l(e,"DIV",{class:!0});var c=i(k);O=l(c,"P",{class:!0});var r=i(O);$=h(r,B),r.forEach(f),b=n(c),U.l(c),y=n(c),P=l(c,"DIV",{class:!0});var o=i(P);D=l(o,"SPAN",{});var p=i(D);T=h(p,"+"),p.forEach(f),C=n(o),N=l(o,"SPAN",{});var d=i(N);w=h(d,"-"),d.forEach(f),j=n(o),H=l(o,"svg",{viewBox:!0,fill:!0},1);var u=i(H);M=l(u,"path",{d:!0,fill:!0},1),i(M).forEach(f),G=l(u,"path",{d:!0},1),i(G).forEach(f),u.forEach(f),o.forEach(f),c.forEach(f),J=n(e),e.forEach(f),this.h()},h(){p(s.src,S="/"+a[8].image+"-120.jpg")||d(s,"src",S),d(s,"alt","hi:)"),d(s,"class","bg-image"),d(O,"class","name"),d(M,"d","M0 0h24v24H0V0z"),d(M,"fill","none"),d(G,"d","M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"),d(H,"viewBox","0 0 24 24"),d(H,"fill","var(--dark-text)"),d(P,"class","buttons"),d(k,"class","text"),d(t,"class","item")},m(e,c){u(e,t,c),v(t,s),v(t,I),v(t,k),v(k,O),v(O,$),v(k,b),U.m(k,null),v(k,y),v(k,P),v(P,D),v(D,T),v(P,C),v(P,N),v(N,w),v(P,j),v(P,H),v(H,M),v(H,G),v(t,J),z||(A=[m(D,"click",(function(){g(a[4](a[8]))&&a[4](a[8]).apply(this,arguments)})),m(N,"click",(function(){g(a[3](a[8]))&&a[3](a[8]).apply(this,arguments)})),m(H,"click",(function(){g(a[5](a[8]))&&a[5](a[8]).apply(this,arguments)}))],z=!0)},p(t,e){a=t,4&e&&!p(s.src,S="/"+a[8].image+"-120.jpg")&&d(s,"src",S),4&e&&B!==(B=a[8].name+" ("+a[8].amount+")")&&E($,B),R===(R=Q(a))&&U?U.p(a,e):(U.d(1),U=R(a),U&&(U.c(),U.m(k,y)))},d(a){a&&f(t),U.d(),z=!1,x(A)}}}function P(a){let t,s,o,p,g,x,k,O,$,F,V,P,D,T,C,N,w,j,H,M,G,J,z,A,B,Q,R,U,q,K,L,W,X,Y,Z,_,aa,ta,sa=a[0].toFixed(2)+"",ea=(.05*a[0]).toFixed(2)+"",ca=(.09975*a[0]).toFixed(2)+"",ra=(1.14975*a[0]).toFixed(2)+"",oa=a[2],la=[];for(let e=0;e<oa.length;e+=1)la[e]=y(b(a,oa,e));return{c(){t=e("div"),s=e("h1"),o=r("Shopping Cart ("),p=r(a[1]),g=r(")"),x=c(),k=e("div"),O=e("div");for(let a=0;a<la.length;a+=1)la[a].c();$=c(),F=e("div"),V=e("p"),P=e("i"),D=r(a[1]),T=r(" Items - $"),C=r(sa),N=c(),w=e("p"),j=e("i"),H=r("GST - $"),M=r(ea),G=c(),J=e("p"),z=e("i"),A=r("QST - $"),B=r(ca),Q=c(),R=e("p"),U=r("Total: $"),q=r(ra),K=c(),L=e("div"),W=e("button"),X=r("Checkout"),Y=c(),Z=e("a"),_=r("Continue Shopping"),this.h()},l(e){t=l(e,"DIV",{class:!0});var c=i(t);s=l(c,"H1",{});var r=i(s);o=h(r,"Shopping Cart ("),p=h(r,a[1]),g=h(r,")"),r.forEach(f),x=n(c),k=l(c,"DIV",{class:!0});var d=i(k);O=l(d,"DIV",{class:!0});var u=i(O);for(let a=0;a<la.length;a+=1)la[a].l(u);u.forEach(f),$=n(d),F=l(d,"DIV",{class:!0});var v=i(F);V=l(v,"P",{});var m=i(V);P=l(m,"I",{});var E=i(P);D=h(E,a[1]),T=h(E," Items - $"),C=h(E,sa),E.forEach(f),m.forEach(f),N=n(v),w=l(v,"P",{});var S=i(w);j=l(S,"I",{});var I=i(j);H=h(I,"GST - $"),M=h(I,ea),I.forEach(f),S.forEach(f),G=n(v),J=l(v,"P",{});var b=i(J);z=l(b,"I",{});var y=i(z);A=h(y,"QST - $"),B=h(y,ca),y.forEach(f),b.forEach(f),Q=n(v),R=l(v,"P",{class:!0});var aa=i(R);U=h(aa,"Total: $"),q=h(aa,ra),aa.forEach(f),v.forEach(f),K=n(d),L=l(d,"DIV",{class:!0});var ta=i(L);W=l(ta,"BUTTON",{class:!0});var oa=i(W);X=h(oa,"Checkout"),oa.forEach(f),Y=n(ta),Z=l(ta,"A",{"sveltekit:prefetch":!0,class:!0,href:!0});var ia=i(Z);_=h(ia,"Continue Shopping"),ia.forEach(f),ta.forEach(f),d.forEach(f),c.forEach(f),this.h()},h(){d(O,"class","items"),d(R,"class","total"),d(F,"class","summary"),d(W,"class","checkout"),d(Z,"sveltekit:prefetch",""),d(Z,"class","continue"),d(Z,"href","/"),d(L,"class","buttons"),d(k,"class","cart"),d(t,"class","cart-wrapper")},m(e,c){u(e,t,c),v(t,s),v(s,o),v(s,p),v(s,g),v(t,x),v(t,k),v(k,O);for(let a=0;a<la.length;a+=1)la[a].m(O,null);v(k,$),v(k,F),v(F,V),v(V,P),v(P,D),v(P,T),v(P,C),v(F,N),v(F,w),v(w,j),v(j,H),v(j,M),v(F,G),v(F,J),v(J,z),v(z,A),v(z,B),v(F,Q),v(F,R),v(R,U),v(R,q),v(k,K),v(k,L),v(L,W),v(W,X),v(L,Y),v(L,Z),v(Z,_),aa||(ta=m(W,"click",a[7]),aa=!0)},p(a,[t]){if(2&t&&E(p,a[1]),60&t){let s;for(oa=a[2],s=0;s<oa.length;s+=1){const e=b(a,oa,s);la[s]?la[s].p(e,t):(la[s]=y(e),la[s].c(),la[s].m(O,null))}for(;s<la.length;s+=1)la[s].d(1);la.length=oa.length}2&t&&E(D,a[1]),1&t&&sa!==(sa=a[0].toFixed(2)+"")&&E(C,sa),1&t&&ea!==(ea=(.05*a[0]).toFixed(2)+"")&&E(M,ea),1&t&&ca!==(ca=(.09975*a[0]).toFixed(2)+"")&&E(B,ca),1&t&&ra!==(ra=(1.14975*a[0]).toFixed(2)+"")&&E(q,ra)},i:S,o:S,d(a){a&&f(t),I(la,a),aa=!1,ta()}}}function D(a,t,s){let e;k(a,$,(a=>s(2,e=a)));let c=0,r=0,o=a=>{console.log("delete"),O($,e[e.indexOf(a)].amount=e[e.indexOf(a)].amount-1,e),e.splice(e.indexOf(a),1)},l=async()=>{let a=JSON.parse(localStorage.getItem("userCredentials")).secret,t=JSON.parse(localStorage.getItem("userCredentials")).email;await fetch("/api/checkout",{method:"POST",body:JSON.stringify({secret:a,user:t,cart:e})}).catch((a=>a)).then((a=>a.json())).then((a=>{switch(console.log(a.data),a.data){case"":break;case"user":goto("/");break;case"manager":goto("/backstore/products")}return a})),O($,e=[],e)};return a.$$.update=()=>{7&a.$$.dirty&&(s(1,r=0),s(0,c=0),Object.values(e).map((a=>{s(1,r+=a.amount),s(0,c+=(a.price-a.rebate)*a.amount)})),"undefined"!=typeof window&&localStorage.setItem("cart",JSON.stringify(e)))},[c,r,e,a=>{O($,e[e.indexOf(a)].amount=e[e.indexOf(a)].amount-1,e),0==e[e.indexOf(a)].amount&&o(a)},a=>{O($,e[e.indexOf(a)].amount=e[e.indexOf(a)].amount+1,e)},o,l,()=>l()]}export default class extends a{constructor(a){super(),t(this,a,D,P,s,{})}}
