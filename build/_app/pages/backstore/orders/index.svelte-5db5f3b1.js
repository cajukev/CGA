import{S as e,i as t,s,e as r,t as a,k as l,l as o,c,a as n,g as h,d as i,n as d,b as f,f as u,E as p,F as m,G as v,A as g,I as k,O as E,h as O,N as x}from"../../../chunks/vendor-a95f158c.js";import{u as y}from"../../../chunks/stores-30180c6b.js";function S(e,t,s){const r=e.slice();return r[4]=t[s],r}function b(e){let t,s=e[0],a=[];for(let r=0;r<s.length;r+=1)a[r]=N(S(e,s,r));return{c(){t=r("div");for(let e=0;e<a.length;e+=1)a[e].c();this.h()},l(e){t=c(e,"DIV",{class:!0});var s=n(t);for(let t=0;t<a.length;t+=1)a[t].l(s);s.forEach(i),this.h()},h(){f(t,"class","orderList svelte-x0od9k")},m(e,s){u(e,t,s);for(let r=0;r<a.length;r+=1)a[r].m(t,null)},p(e,r){if(13&r){let l;for(s=e[0],l=0;l<s.length;l+=1){const o=S(e,s,l);a[l]?a[l].p(o,r):(a[l]=N(o),a[l].c(),a[l].m(t,null))}for(;l<a.length;l+=1)a[l].d(1);a.length=s.length}},d(e){e&&i(t),x(a,e)}}}function w(e){let t,s;return{c(){t=r("p"),s=a("You are not allowed here >:("),this.h()},l(e){t=c(e,"P",{class:!0});var r=n(t);s=h(r,"You are not allowed here >:("),r.forEach(i),this.h()},h(){f(t,"class","unauthorized svelte-x0od9k")},m(e,r){u(e,t,r),p(t,s)},p:m,d(e){e&&i(t)}}}function N(e){let t,s,o,m,v,g,x,y,S,b,w,N,P,j,D,I,J,L,A=e[4].ref["@ref"].id+"",T=e[4].data.email+"",V=e[3](e[4].data.cart)+"";return{c(){t=r("div"),s=r("p"),o=a(A),m=a(" - "),v=a(T),g=a(" - ("),x=a(V),y=a(")"),S=l(),b=r("a"),w=a("Edit Order"),P=l(),j=r("p"),D=a("Delete Order"),I=l(),this.h()},l(e){t=c(e,"DIV",{class:!0});var r=n(t);s=c(r,"P",{class:!0});var a=n(s);o=h(a,A),m=h(a," - "),v=h(a,T),g=h(a," - ("),x=h(a,V),y=h(a,")"),a.forEach(i),S=d(r),b=c(r,"A",{"sveltekit:prefetch":!0,href:!0,class:!0});var l=n(b);w=h(l,"Edit Order"),l.forEach(i),P=d(r),j=c(r,"P",{class:!0});var f=n(j);D=h(f,"Delete Order"),f.forEach(i),I=d(r),r.forEach(i),this.h()},h(){f(s,"class","name svelte-x0od9k"),f(b,"sveltekit:prefetch",""),f(b,"href",N="/backstore/orders/"+e[4].ref["@ref"].id),f(b,"class","svelte-x0od9k"),f(j,"class","action svelte-x0od9k"),f(t,"class","elem svelte-x0od9k")},m(r,a){u(r,t,a),p(t,s),p(s,o),p(s,m),p(s,v),p(s,g),p(s,x),p(s,y),p(t,S),p(t,b),p(b,w),p(t,P),p(t,j),p(j,D),p(t,I),J||(L=k(j,"click",(function(){E(e[2](e[4].ref["@ref"].id))&&e[2](e[4].ref["@ref"].id).apply(this,arguments)})),J=!0)},p(t,s){e=t,1&s&&A!==(A=e[4].ref["@ref"].id+"")&&O(o,A),1&s&&T!==(T=e[4].data.email+"")&&O(v,T),1&s&&V!==(V=e[3](e[4].data.cart)+"")&&O(x,V),1&s&&N!==(N="/backstore/orders/"+e[4].ref["@ref"].id)&&f(b,"href",N)},d(e){e&&i(t),J=!1,L()}}}function P(e){let t,s,v,g;function k(e,t){return"manager"!=e[1].type?w:b}let E=k(e),O=E(e);return{c(){t=r("h1"),s=a("Order List"),v=l(),O.c(),g=o(),this.h()},l(e){t=c(e,"H1",{class:!0});var r=n(t);s=h(r,"Order List"),r.forEach(i),v=d(e),O.l(e),g=o(),this.h()},h(){f(t,"class","svelte-x0od9k")},m(e,r){u(e,t,r),p(t,s),u(e,v,r),O.m(e,r),u(e,g,r)},p(e,[t]){E===(E=k(e))&&O?O.p(e,t):(O.d(1),O=E(e),O&&(O.c(),O.m(g.parentNode,g)))},i:m,o:m,d(e){e&&i(t),e&&i(v),O.d(e),e&&i(g)}}}function j(e,t,s){let r;v(e,y,(e=>s(1,r=e)));let a=[];g((async()=>{const e=await fetch("/api/orderlist",{method:"POST",body:JSON.stringify({secret:r.secret})}).then((e=>e.json())).then((e=>e));let t=await e;console.log(await t);let l=[];t.data.forEach((e=>{l.push(e)})),s(0,a=l)}));return[a,r,async e=>{let t=JSON.parse(localStorage.getItem("userCredentials")).secret;await fetch("/api/deleteorder",{method:"POST",body:JSON.stringify({id:e,secret:t})}).catch((e=>e)).then((e=>e.json())).then((e=>(console.log(e.data),e))),location.reload()},e=>{let t=0;return e.forEach((e=>{t+=e.amount})),t}]}export default class extends e{constructor(e){super(),t(this,e,j,P,s,{})}}
