import{S as e,i as t,s,e as a,t as c,k as r,l as o,c as i,a as l,g as n,d as p,n as h,b as g,f as d,E as m,F as u,G as f,M as v,I as b,O as y,h as E,N as w}from"../../../chunks/vendor-a95f158c.js";import{u as j}from"../../../chunks/stores-30180c6b.js";function x(e,t,s){const a=e.slice();return a[3]=t[s],a}function P(e){let t,s,o,u,f,v=e[0],b=[];for(let a=0;a<v.length;a+=1)b[a]=S(x(e,v,a));return{c(){t=a("div");for(let e=0;e<b.length;e+=1)b[e].c();s=r(),o=a("div"),u=a("a"),f=c("Add A Product"),this.h()},l(e){t=i(e,"DIV",{class:!0});var a=l(t);for(let t=0;t<b.length;t+=1)b[t].l(a);s=h(a),o=i(a,"DIV",{class:!0});var c=l(o);u=i(c,"A",{"sveltekit:prefetch":!0,href:!0});var r=l(u);f=n(r,"Add A Product"),r.forEach(p),c.forEach(p),a.forEach(p),this.h()},h(){g(u,"sveltekit:prefetch",""),g(u,"href","/backstore/products/new"),g(o,"class","elem new svelte-1gcboyt"),g(t,"class","productList svelte-1gcboyt")},m(e,a){d(e,t,a);for(let s=0;s<b.length;s+=1)b[s].m(t,null);m(t,s),m(t,o),m(o,u),m(u,f)},p(e,a){if(5&a){let c;for(v=e[0],c=0;c<v.length;c+=1){const r=x(e,v,c);b[c]?b[c].p(r,a):(b[c]=S(r),b[c].c(),b[c].m(t,s))}for(;c<b.length;c+=1)b[c].d(1);b.length=v.length}},d(e){e&&p(t),w(b,e)}}}function k(e){let t,s;return{c(){t=a("p"),s=c("You are not allowed here >:("),this.h()},l(e){t=i(e,"P",{class:!0});var a=l(t);s=n(a,"You are not allowed here >:("),a.forEach(p),this.h()},h(){g(t,"class","unauthorized svelte-1gcboyt")},m(e,a){d(e,t,a),m(t,s)},p:u,d(e){e&&p(t)}}}function S(e){let t,s,o,u,f,w,j,x,P,k,S,I,L,O,A,C,D,R,U,N,V,G,J,M,T,Y,$,z,F,H=e[3].name+"";return{c(){t=a("div"),s=a("picture"),o=a("source"),f=r(),w=a("source"),x=r(),P=a("source"),S=r(),I=a("source"),O=r(),A=a("img"),D=r(),R=a("div"),U=a("p"),N=c(H),V=r(),G=a("a"),J=c("Edit Product"),T=r(),Y=a("p"),$=c("Delete Product"),this.h()},l(e){t=i(e,"DIV",{class:!0});var a=l(t);s=i(a,"PICTURE",{});var c=l(s);o=i(c,"SOURCE",{srcset:!0,media:!0,type:!0}),f=h(c),w=i(c,"SOURCE",{srcset:!0,media:!0,type:!0}),x=h(c),P=i(c,"SOURCE",{srcset:!0,type:!0}),S=h(c),I=i(c,"SOURCE",{srcset:!0,type:!0}),O=h(c),A=i(c,"IMG",{src:!0,alt:!0,class:!0}),c.forEach(p),D=h(a),R=i(a,"DIV",{class:!0});var r=l(R);U=i(r,"P",{class:!0});var g=l(U);N=n(g,H),g.forEach(p),V=h(r),G=i(r,"A",{"sveltekit:prefetch":!0,class:!0,href:!0});var d=l(G);J=n(d,"Edit Product"),d.forEach(p),T=h(r),Y=i(r,"P",{class:!0});var m=l(Y);$=n(m,"Delete Product"),m.forEach(p),r.forEach(p),a.forEach(p),this.h()},h(){g(o,"srcset",u="/"+e[3].image+"-120.webp, /"+e[3].image+"-240.webp 2x"),g(o,"media","(max-width:1200px)"),g(o,"type","image/webp"),g(w,"srcset",j="/"+e[3].image+"-120.jpg, /"+e[3].image+"-240.jpg 2x"),g(w,"media","(max-width:1200px)"),g(w,"type","image/jpeg"),g(P,"srcset",k="/"+e[3].image+"-240.webp, /"+e[3].image+"-400.webp 2x"),g(P,"type","image/webp"),g(I,"srcset",L="/"+e[3].image+"-240.jpg, /"+e[3].image+"-400.jpg 2x"),g(I,"type","image/jpeg"),v(A.src,C="/"+e[3].image+"-240.jpg")||g(A,"src",C),g(A,"alt","hi:)"),g(A,"class","bg-image svelte-1gcboyt"),g(U,"class","name"),g(G,"sveltekit:prefetch",""),g(G,"class","action svelte-1gcboyt"),g(G,"href",M="/backstore/products/"+e[3].name),g(Y,"class","action svelte-1gcboyt"),g(R,"class","text svelte-1gcboyt"),g(t,"class","elem svelte-1gcboyt")},m(a,c){d(a,t,c),m(t,s),m(s,o),m(s,f),m(s,w),m(s,x),m(s,P),m(s,S),m(s,I),m(s,O),m(s,A),m(t,D),m(t,R),m(R,U),m(U,N),m(R,V),m(R,G),m(G,J),m(R,T),m(R,Y),m(Y,$),z||(F=b(Y,"click",(function(){y(e[2](e[3].name))&&e[2](e[3].name).apply(this,arguments)})),z=!0)},p(t,s){e=t,1&s&&u!==(u="/"+e[3].image+"-120.webp, /"+e[3].image+"-240.webp 2x")&&g(o,"srcset",u),1&s&&j!==(j="/"+e[3].image+"-120.jpg, /"+e[3].image+"-240.jpg 2x")&&g(w,"srcset",j),1&s&&k!==(k="/"+e[3].image+"-240.webp, /"+e[3].image+"-400.webp 2x")&&g(P,"srcset",k),1&s&&L!==(L="/"+e[3].image+"-240.jpg, /"+e[3].image+"-400.jpg 2x")&&g(I,"srcset",L),1&s&&!v(A.src,C="/"+e[3].image+"-240.jpg")&&g(A,"src",C),1&s&&H!==(H=e[3].name+"")&&E(N,H),1&s&&M!==(M="/backstore/products/"+e[3].name)&&g(G,"href",M)},d(e){e&&p(t),z=!1,F()}}}function I(e){let t,s,f,v;function b(e,t){return"manager"!=e[1].type?k:P}let y=b(e),E=y(e);return{c(){t=a("h1"),s=c("Product List"),f=r(),E.c(),v=o(),this.h()},l(e){t=i(e,"H1",{class:!0});var a=l(t);s=n(a,"Product List"),a.forEach(p),f=h(e),E.l(e),v=o(),this.h()},h(){g(t,"class","svelte-1gcboyt")},m(e,a){d(e,t,a),m(t,s),d(e,f,a),E.m(e,a),d(e,v,a)},p(e,[t]){y===(y=b(e))&&E?E.p(e,t):(E.d(1),E=y(e),E&&(E.c(),E.m(v.parentNode,v)))},i:u,o:u,d(e){e&&p(t),e&&p(f),E.d(e),e&&p(v)}}}const L=async({fetch:e})=>{const t=await e("/api/productlist").then((e=>e.json())).then((e=>e)),s=await t;let a=[];return s.data.forEach((e=>{a.push(e.data)})),{props:{productList:a}}};function O(e,t,s){let a;f(e,j,(e=>s(1,a=e)));let{productList:c}=t;return e.$$set=e=>{"productList"in e&&s(0,c=e.productList)},[c,a,async e=>{let t=JSON.parse(localStorage.getItem("userCredentials")).secret;await fetch("/api/deleteproduct",{method:"POST",body:JSON.stringify({name:e,secret:t})}).catch((e=>e)).then((e=>e.json())).then((e=>(console.log(e.data),e))),location.reload()}]}export default class extends e{constructor(e){super(),t(this,e,O,I,s,{productList:0})}}export{L as load};
