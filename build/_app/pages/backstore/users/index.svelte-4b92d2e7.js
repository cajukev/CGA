import{S as e,i as s,s as t,e as a,t as r,k as l,l as c,c as o,a as h,g as n,d as i,n as f,b as d,f as u,E as m,F as v,G as p,A as q,I as w,O as g,h as E,N as k}from"../../../chunks/vendor-a95f158c.js";import{u as x}from"../../../chunks/stores-30180c6b.js";function y(e,s,t){const a=e.slice();return a[3]=s[t],a}function U(e){let s,t,c,v,p,q=e[0],w=[];for(let a=0;a<q.length;a+=1)w[a]=S(y(e,q,a));return{c(){s=a("div");for(let e=0;e<w.length;e+=1)w[e].c();t=l(),c=a("div"),v=a("a"),p=r("Add a User"),this.h()},l(e){s=o(e,"DIV",{class:!0});var a=h(s);for(let s=0;s<w.length;s+=1)w[s].l(a);t=f(a),c=o(a,"DIV",{class:!0});var r=h(c);v=o(r,"A",{"sveltekit:prefetch":!0,href:!0,class:!0});var l=h(v);p=n(l,"Add a User"),l.forEach(i),r.forEach(i),a.forEach(i),this.h()},h(){d(v,"sveltekit:prefetch",""),d(v,"href","/backstore/users/new"),d(v,"class","svelte-1q0qwox"),d(c,"class","elem new  svelte-1q0qwox"),d(s,"class","userList svelte-1q0qwox")},m(e,a){u(e,s,a);for(let t=0;t<w.length;t+=1)w[t].m(s,null);m(s,t),m(s,c),m(c,v),m(v,p)},p(e,a){if(5&a){let r;for(q=e[0],r=0;r<q.length;r+=1){const l=y(e,q,r);w[r]?w[r].p(l,a):(w[r]=S(l),w[r].c(),w[r].m(s,t))}for(;r<w.length;r+=1)w[r].d(1);w.length=q.length}},d(e){e&&i(s),k(w,e)}}}function b(e){let s,t;return{c(){s=a("p"),t=r("You are not allowed here >:("),this.h()},l(e){s=o(e,"P",{class:!0});var a=h(s);t=n(a,"You are not allowed here >:("),a.forEach(i),this.h()},h(){d(s,"class","unauthorized svelte-1q0qwox")},m(e,a){u(e,s,a),m(s,t)},p:v,d(e){e&&i(s)}}}function S(e){let s,t,c,v,p,q,k,x,y,U,b,S,O=e[3].email+"";return{c(){s=a("div"),t=a("p"),c=r(O),v=l(),p=a("a"),q=r("Edit User"),x=l(),y=a("p"),U=r("Delete User"),this.h()},l(e){s=o(e,"DIV",{class:!0});var a=h(s);t=o(a,"P",{class:!0});var r=h(t);c=n(r,O),r.forEach(i),v=f(a),p=o(a,"A",{"sveltekit:prefetch":!0,href:!0,class:!0});var l=h(p);q=n(l,"Edit User"),l.forEach(i),x=f(a),y=o(a,"P",{class:!0});var d=h(y);U=n(d,"Delete User"),d.forEach(i),a.forEach(i),this.h()},h(){d(t,"class","name svelte-1q0qwox"),d(p,"sveltekit:prefetch",""),d(p,"href",k="/backstore/users/"+e[3].email),d(p,"class","svelte-1q0qwox"),d(y,"class","action svelte-1q0qwox"),d(s,"class","elem svelte-1q0qwox")},m(a,r){u(a,s,r),m(s,t),m(t,c),m(s,v),m(s,p),m(p,q),m(s,x),m(s,y),m(y,U),b||(S=w(y,"click",(function(){g(e[2](e[3].email))&&e[2](e[3].email).apply(this,arguments)})),b=!0)},p(s,t){e=s,1&t&&O!==(O=e[3].email+"")&&E(c,O),1&t&&k!==(k="/backstore/users/"+e[3].email)&&d(p,"href",k)},d(e){e&&i(s),b=!1,S()}}}function O(e){let s,t,p,q;function w(e,s){return"manager"!=e[1].type?b:U}let g=w(e),E=g(e);return{c(){s=a("h1"),t=r("User List"),p=l(),E.c(),q=c(),this.h()},l(e){s=o(e,"H1",{class:!0});var a=h(s);t=n(a,"User List"),a.forEach(i),p=f(e),E.l(e),q=c(),this.h()},h(){d(s,"class","svelte-1q0qwox")},m(e,a){u(e,s,a),m(s,t),u(e,p,a),E.m(e,a),u(e,q,a)},p(e,[s]){g===(g=w(e))&&E?E.p(e,s):(E.d(1),E=g(e),E&&(E.c(),E.m(q.parentNode,q)))},i:v,o:v,d(e){e&&i(s),e&&i(p),E.d(e),e&&i(q)}}}function A(e,s,t){let a;p(e,x,(e=>t(1,a=e)));let r=[];q((async()=>{const e=await fetch("/api/userlist",{method:"POST",body:JSON.stringify({secret:a.secret})}).then((e=>e.json())).then((e=>e));let s=await e,l=[];s.data.forEach((e=>{l.push(e.data)})),t(0,r=l)}));return[r,a,async e=>{let s=JSON.parse(localStorage.getItem("userCredentials")).secret;await fetch("/api/deleteuser",{method:"POST",body:JSON.stringify({email:e,secret:s})}).catch((e=>e)).then((e=>e.json())).then((e=>(console.log(e.data),e))),location.reload()}]}export default class extends e{constructor(e){super(),s(this,e,A,O,t,{})}}
