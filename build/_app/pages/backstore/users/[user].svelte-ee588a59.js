import{S as e,i as s,s as a,e as t,t as r,k as l,c,a as o,g as n,d as i,n as h,b as f,f as u,E as m,h as d,l as p,I as v,F as g,N as y,A as E,P as b}from"../../../chunks/vendor-a95f158c.js";import{g as j}from"../../../chunks/navigation-20968cc5.js";import"../../../chunks/singletons-bb9012b7.js";function k(e,s,a){const t=e.slice();return t[5]=s[a],t}function S(e){let s,a,p,v,g,y,E=e[5].ref["@ref"].id+"";return{c(){s=t("div"),a=t("p"),p=t("a"),v=r(E),y=l(),this.h()},l(e){s=c(e,"DIV",{class:!0});var t=o(s);a=c(t,"P",{class:!0});var r=o(a);p=c(r,"A",{"sveltekit:prefetch":!0,href:!0});var l=o(p);v=n(l,E),l.forEach(i),r.forEach(i),y=h(t),t.forEach(i),this.h()},h(){f(p,"sveltekit:prefetch",""),f(p,"href",g="/backstore/orders/"+e[5].ref["@ref"].id),f(a,"class","svelte-11m0j8y"),f(s,"class","entry")},m(e,t){u(e,s,t),m(s,a),m(a,p),m(p,v),m(s,y)},p(e,s){2&s&&E!==(E=e[5].ref["@ref"].id+"")&&d(v,E),2&s&&g!==(g="/backstore/orders/"+e[5].ref["@ref"].id)&&f(p,"href",g)},d(e){e&&i(s)}}}function O(e){let s,a,E,b,j,O,N,I,P,w,x,J,T,A,C,D,F,H,L=e[1],U=[];for(let t=0;t<L.length;t+=1)U[t]=S(k(e,L,t));return{c(){s=t("h1"),a=r(e[0]),E=l(),b=t("div"),j=t("form"),O=t("label"),N=r("Email*:"),I=l(),P=t("input"),w=l(),x=t("input"),J=l(),T=t("h2"),A=r("Orders"),C=l();for(let e=0;e<U.length;e+=1)U[e].c();D=p(),this.h()},l(t){s=c(t,"H1",{class:!0});var r=o(s);a=n(r,e[0]),r.forEach(i),E=h(t),b=c(t,"DIV",{class:!0});var l=o(b);j=c(l,"FORM",{action:!0,class:!0});var f=o(j);O=c(f,"LABEL",{for:!0});var u=o(O);N=n(u,"Email*:"),u.forEach(i),I=h(f),P=c(f,"INPUT",{type:!0,name:!0,id:!0,class:!0}),w=h(f),x=c(f,"INPUT",{type:!0,class:!0}),f.forEach(i),l.forEach(i),J=h(t),T=c(t,"H2",{class:!0});var m=o(T);A=n(m,"Orders"),m.forEach(i),C=h(t);for(let e=0;e<U.length;e+=1)U[e].l(t);D=p(),this.h()},h(){f(s,"class","svelte-11m0j8y"),f(O,"for","email"),P.value=e[0],f(P,"type","text"),f(P,"name","name"),f(P,"id","name"),P.required=!0,f(P,"class","svelte-11m0j8y"),x.value="Submit",f(x,"type","button"),f(x,"class","svelte-11m0j8y"),f(j,"action",""),f(j,"class","svelte-11m0j8y"),f(b,"class","form-wrapper"),f(T,"class","svelte-11m0j8y")},m(t,r){u(t,s,r),m(s,a),u(t,E,r),u(t,b,r),m(b,j),m(j,O),m(O,N),m(j,I),m(j,P),e[4](P),m(j,w),m(j,x),u(t,J,r),u(t,T,r),m(T,A),u(t,C,r);for(let e=0;e<U.length;e+=1)U[e].m(t,r);u(t,D,r),F||(H=v(x,"click",e[3]),F=!0)},p(e,[s]){if(1&s&&d(a,e[0]),1&s&&P.value!==e[0]&&(P.value=e[0]),2&s){let a;for(L=e[1],a=0;a<L.length;a+=1){const t=k(e,L,a);U[a]?U[a].p(t,s):(U[a]=S(t),U[a].c(),U[a].m(D.parentNode,D))}for(;a<U.length;a+=1)U[a].d(1);U.length=L.length}},i:g,o:g,d(a){a&&i(s),a&&i(E),a&&i(b),e[4](null),a&&i(J),a&&i(T),a&&i(C),y(U,a),a&&i(D),F=!1,H()}}}async function N({page:e,fetch:s,session:a,context:t}){return{props:{userEmail:e.path.split("/")[3]}}}function I(e,s,a){let t,{userEmail:r}=s,l=[];E((async()=>{let e=JSON.parse(localStorage.getItem("userCredentials")).secret;const s=await fetch("/api/ordersbyemail",{method:"POST",body:JSON.stringify({email:r,secret:e})}).then((e=>e.json())).then((e=>e.data));let t=await s;a(1,l=t),console.log(await s)}));return e.$$set=e=>{"userEmail"in e&&a(0,r=e.userEmail)},[r,l,t,async()=>{let e=JSON.parse(localStorage.getItem("userCredentials")).secret;await fetch("/api/edituser",{method:"POST",body:JSON.stringify({ogemail:r,secret:e,email:t.value})}).catch((e=>e)).then((e=>e.json())).then((e=>(console.log(e.data),t.value==r||j("/backstore/users/"+t.value),location.reload(),e)))},function(e){b[e?"unshift":"push"]((()=>{t=e,a(2,t)}))}]}export default class extends e{constructor(e){super(),s(this,e,I,O,a,{userEmail:0})}}export{N as load};
