function e(){}function t(e,t){for(const n in t)e[n]=t[n];return e}function n(e){return e()}function r(){return Object.create(null)}function o(e){e.forEach(n)}function i(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let s;function u(e,t){return s||(s=document.createElement("a")),s.href=t,e===s.href}function c(t,...n){if(null==t)return e;const r=t.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function l(e,t,n){e.$$.on_destroy.push(c(t,n))}function f(e,t,n,r){if(e){const o=d(e,t,n,r);return e[0](o)}}function d(e,n,r,o){return e[1]&&o?t(r.ctx.slice(),e[1](o(n))):r.ctx}function p(e,t,n,r,o,i,a){const s=function(e,t,n,r){if(e[2]&&r){const o=e[2](r(n));if(void 0===t.dirty)return o;if("object"==typeof o){const e=[],n=Math.max(t.dirty.length,o.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|o[r];return e}return t.dirty|o}return t.dirty}(t,r,o,i);if(s){const o=d(t,n,r,a);e.p(o,s)}}function h(e,t,n=t){return e.set(n),t}let m,y=!1;function w(e,t,n,r){for(;e<t;){const o=e+(t-e>>1);n(o)<=r?e=o+1:t=o}return e}function b(e,t){if(y){for(!function(e){if(e.hydrate_init)return;e.hydrate_init=!0;let t=e.childNodes;if("HEAD"===e.nodeName){const e=[];for(let n=0;n<t.length;n++){const r=t[n];void 0!==r.claim_order&&e.push(r)}t=e}const n=new Int32Array(t.length+1),r=new Int32Array(t.length);n[0]=-1;let o=0;for(let u=0;u<t.length;u++){const e=t[u].claim_order,i=(o>0&&t[n[o]].claim_order<=e?o+1:w(1,o,(e=>t[n[e]].claim_order),e))-1;r[u]=n[i]+1;const a=i+1;n[a]=u,o=Math.max(a,o)}const i=[],a=[];let s=t.length-1;for(let u=n[o]+1;0!=u;u=r[u-1]){for(i.push(t[u-1]);s>=u;s--)a.push(t[s]);s--}for(;s>=0;s--)a.push(t[s]);i.reverse(),a.sort(((e,t)=>e.claim_order-t.claim_order));for(let u=0,c=0;u<a.length;u++){for(;c<i.length&&a[u].claim_order>=i[c].claim_order;)c++;const t=c<i.length?i[c]:null;e.insertBefore(a[u],t)}}(e),(void 0===e.actual_end_child||null!==e.actual_end_child&&e.actual_end_child.parentElement!==e)&&(e.actual_end_child=e.firstChild);null!==e.actual_end_child&&void 0===e.actual_end_child.claim_order;)e.actual_end_child=e.actual_end_child.nextSibling;t!==e.actual_end_child?void 0===t.claim_order&&t.parentNode===e||e.insertBefore(t,e.actual_end_child):e.actual_end_child=t.nextSibling}else t.parentNode!==e&&e.appendChild(t)}function v(e,t,n){y&&!n?b(e,t):t.parentNode===e&&t.nextSibling==n||e.insertBefore(t,n||null)}function g(e){e.parentNode.removeChild(e)}function _(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function x(e){return document.createElement(e)}function E(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function S(e){return document.createTextNode(e)}function T(){return S(" ")}function O(){return S("")}function A(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function C(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function P(e){return Array.from(e.childNodes)}function j(e,t,n,r,o=!1){!function(e){void 0===e.claim_info&&(e.claim_info={last_index:0,total_claimed:0})}(e);const i=(()=>{for(let r=e.claim_info.last_index;r<e.length;r++){const i=e[r];if(t(i)){const t=n(i);return void 0===t?e.splice(r,1):e[r]=t,o||(e.claim_info.last_index=r),i}}for(let r=e.claim_info.last_index-1;r>=0;r--){const i=e[r];if(t(i)){const t=n(i);return void 0===t?e.splice(r,1):e[r]=t,o?void 0===t&&e.claim_info.last_index--:e.claim_info.last_index=r,i}}return r()})();return i.claim_order=e.claim_info.total_claimed,e.claim_info.total_claimed+=1,i}function N(e,t,n,r){return j(e,(e=>e.nodeName===t),(e=>{const t=[];for(let r=0;r<e.attributes.length;r++){const o=e.attributes[r];n[o.name]||t.push(o.name)}t.forEach((t=>e.removeAttribute(t)))}),(()=>r?E(t):x(t)))}function I(e,t){return j(e,(e=>3===e.nodeType),(e=>{const n=""+t;if(e.data.startsWith(n)){if(e.data.length!==n.length)return e.splitText(n.length)}else e.data=n}),(()=>S(t)),!0)}function R(e){return I(e," ")}function k(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function D(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t)return void(r.selected=!0)}}function B(e){m=e}function M(){if(!m)throw new Error("Function called outside component initialization");return m}function F(e){M().$$.on_mount.push(e)}function L(e){M().$$.after_update.push(e)}function q(e,t){M().$$.context.set(e,t)}const U=[],W=[],$=[],H=[],V=Promise.resolve();let G=!1;function J(e){$.push(e)}let X=!1;const z=new Set;function Y(){if(!X){X=!0;do{for(let e=0;e<U.length;e+=1){const t=U[e];B(t),Q(t.$$)}for(B(null),U.length=0;W.length;)W.pop()();for(let e=0;e<$.length;e+=1){const t=$[e];z.has(t)||(z.add(t),t())}$.length=0}while(U.length);for(;H.length;)H.pop()();G=!1,X=!1,z.clear()}}function Q(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(J)}}const K=new Set;let Z;function ee(){Z={r:0,c:[],p:Z}}function te(){Z.r||o(Z.c),Z=Z.p}function ne(e,t){e&&e.i&&(K.delete(e),e.i(t))}function re(e,t,n,r){if(e&&e.o){if(K.has(e))return;K.add(e),Z.c.push((()=>{K.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}function oe(e,t){const n={},r={},o={$$scope:1};let i=e.length;for(;i--;){const a=e[i],s=t[i];if(s){for(const e in a)e in s||(r[e]=1);for(const e in s)o[e]||(n[e]=s[e],o[e]=1);e[i]=s}else for(const e in a)o[e]=1}for(const a in r)a in n||(n[a]=void 0);return n}function ie(e){return"object"==typeof e&&null!==e?e:{}}function ae(e){e&&e.c()}function se(e,t){e&&e.l(t)}function ue(e,t,r,a){const{fragment:s,on_mount:u,on_destroy:c,after_update:l}=e.$$;s&&s.m(t,r),a||J((()=>{const t=u.map(n).filter(i);c?c.push(...t):o(t),e.$$.on_mount=[]})),l.forEach(J)}function ce(e,t){const n=e.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function le(e,t){-1===e.$$.dirty[0]&&(U.push(e),G||(G=!0,V.then(Y)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function fe(t,n,i,a,s,u,c,l=[-1]){const f=m;B(t);const d=t.$$={fragment:null,ctx:null,props:u,update:e,not_equal:s,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:n.context||[]),callbacks:r(),dirty:l,skip_bound:!1,root:n.target||f.$$.root};c&&c(d.root);let p=!1;if(d.ctx=i?i(t,n.props||{},((e,n,...r)=>{const o=r.length?r[0]:n;return d.ctx&&s(d.ctx[e],d.ctx[e]=o)&&(!d.skip_bound&&d.bound[e]&&d.bound[e](o),p&&le(t,e)),n})):[],d.update(),p=!0,o(d.before_update),d.fragment=!!a&&a(d.ctx),n.target){if(n.hydrate){y=!0;const e=P(n.target);d.fragment&&d.fragment.l(e),e.forEach(g)}else d.fragment&&d.fragment.c();n.intro&&ne(t.$$.fragment),ue(t,n.target,n.anchor,n.customElement),y=!1,Y()}B(f)}class de{$destroy(){ce(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const pe=[];function he(t,n=e){let r;const o=new Set;function i(e){if(a(t,e)&&(t=e,r)){const e=!pe.length;for(const n of o)n[1](),pe.push(n,t);if(e){for(let e=0;e<pe.length;e+=2)pe[e][0](pe[e+1]);pe.length=0}}}return{set:i,update:function(e){i(e(t))},subscribe:function(a,s=e){const u=[a,s];return o.add(u),1===o.size&&(r=n(i)||e),a(t),()=>{o.delete(u),0===o.size&&(r(),r=null)}}}}var me="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ye(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}var we=function(e){if("function"!=typeof e)throw new Error("Could not parse function signature for injection dependencies: Object is not a function");if(!e.length)return[];var t=/^()\(?([^)=]*)\)? *=>/.exec(e+"")||/^[^(]+([^ \(]*) *\(([^\)]*)\)/.exec(e+"");if(!t)throw new Error("Could not parse function signature for injection dependencies: "+e);var n=t[2].replace(/\/\*[\S\s]*?\*\//g," ").replace(/\/\/.*/g," ");function r(e,t,n){return t+n.split(",").map((function(e){return e&&e.trim()})).filter(Boolean).join("@")}return(n=(n=n.replace(/(\{)([^}]*)\}/g,r)).replace(/(\[)([^}]*)\]/g,r)).split(",").map((function(e){return e&&e.trim()})).map((function(e){return"{"===e[0]?e.substring(1).split("@"):"["===e[0]?{items:e.substring(1).split("@")}:e})).filter(Boolean)};var be=function(e,t){if(ve("noDeprecation"))return e;var n=!1;return function(){if(!n){if(ve("throwDeprecation"))throw new Error(t);ve("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}};function ve(e){try{if(!me.localStorage)return!1}catch(n){return!1}var t=me.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}var ge={name:"faunadb",version:"4.3.0",apiVersion:"4",description:"FaunaDB Javascript driver for Node.JS and Browsers",homepage:"https://fauna.com",repository:"fauna/faunadb-js",license:"MPL-2.0",keywords:["database","fauna","official","driver"],bugs:{url:"https://github.com/fauna/faunadb-js/issues"},files:["index.d.ts","src/","dist/","tools/printReleaseNotes.js"],main:"index.js",scripts:{doc:"jsdoc -c ./jsdoc.json",browserify:"browserify index.js --standalone faunadb -o dist/faunadb.js","browserify-min":"browserify index.js --standalone faunadb | terser -c -m --keep-fnames --keep-classnames -o dist/faunadb-min.js",prettify:'prettier --write "{src,test}/**/*.{js,ts}"',test:"jest --env=node --verbose=false --forceExit ./test","semantic-release":"semantic-release",wp:"webpack",postinstall:"node ./tools/printReleaseNotes",postupdate:"node ./tools/printReleaseNotes","load-test":"node ./tools/loadTest"},types:"index.d.ts",dependencies:{"abort-controller":"^3.0.0","base64-js":"^1.2.0",boxen:"^5.0.1","btoa-lite":"^1.0.0",chalk:"^4.1.1","cross-fetch":"^3.0.6",dotenv:"^8.2.0","fn-annotate":"^1.1.3","object-assign":"^4.1.0","util-deprecate":"^1.0.2"},devDependencies:{browserify:"^16.2.2",eslint:"^5.3.0","eslint-config-prettier":"^6.5.0","eslint-plugin-prettier":"^3.1.1",husky:">=1","ink-docstrap":"^1.2.1",jest:"^24.9.0",jsdoc:"^3.6.3","lint-staged":">=8",prettier:"1.18.2","semantic-release":"^17.1.2",terser:"^4.3.9",webpack:"^5.23.0","webpack-cli":"^4.5.0",yargs:"^16.2.0"},husky:{hooks:{"pre-commit":"lint-staged"}},"lint-staged":{"*.{js,css,json,md}":["prettier --write","git add"],"*.js":["eslint --fix","git add"]},release:{branches:["master"]},browser:{http2:!1,http:!1,https:!1,os:!1,util:!1,boxen:!1,chalk:!1}},_e=ye(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:{}})),xe={exports:{}};!function(e,t){var n,r="undefined"!=typeof self?self:me,o=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();n=o,function(e){var t="URLSearchParams"in n,r="Symbol"in n&&"iterator"in Symbol,o="FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(e){return!1}}(),i="FormData"in n,a="ArrayBuffer"in n;if(a)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&s.indexOf(Object.prototype.toString.call(e))>-1};function c(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function f(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function p(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function h(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function m(e){var t=new FileReader,n=h(t);return t.readAsArrayBuffer(e),n}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function w(){return this.bodyUsed=!1,this._initBody=function(e){var n;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:o&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:i&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:t&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():a&&o&&(n=e)&&DataView.prototype.isPrototypeOf(n)?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(e)||u(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var e,t,n,r=p(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=h(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(e,t){e=c(e),t=l(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},d.prototype.delete=function(e){delete this.map[c(e)]},d.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},d.prototype.set=function(e,t){this.map[c(e)]=l(t)},d.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},d.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),f(e)},d.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),f(e)},d.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),f(e)},r&&(d.prototype[Symbol.iterator]=d.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(e,t){var n,r,o=(t=t||{}).body;if(e instanceof v){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),b.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function g(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}})),t}function _(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},w.call(v.prototype),w.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},_.error=function(){var e=new _(null,{status:0,statusText:""});return e.type="error",e};var x=[301,302,303,307,308];_.redirect=function(e,t){if(-1===x.indexOf(t))throw new RangeError("Invalid status code");return new _(null,{status:t,headers:{location:e}})},e.DOMException=n.DOMException;try{new e.DOMException}catch(S){e.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function E(t,n){return new Promise((function(r,i){var a=new v(t,n);if(a.signal&&a.signal.aborted)return i(new e.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;function u(){s.abort()}s.onload=function(){var e,t,n={status:s.status,statusText:s.statusText,headers:(e=s.getAllResponseHeaders()||"",t=new d,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}})),t)};n.url="responseURL"in s?s.responseURL:n.headers.get("X-Request-URL");var o="response"in s?s.response:s.responseText;r(new _(o,n))},s.onerror=function(){i(new TypeError("Network request failed"))},s.ontimeout=function(){i(new TypeError("Network request failed"))},s.onabort=function(){i(new e.DOMException("Aborted","AbortError"))},s.open(a.method,a.url,!0),"include"===a.credentials?s.withCredentials=!0:"omit"===a.credentials&&(s.withCredentials=!1),"responseType"in s&&o&&(s.responseType="blob"),a.headers.forEach((function(e,t){s.setRequestHeader(t,e)})),a.signal&&(a.signal.addEventListener("abort",u),s.onreadystatechange=function(){4===s.readyState&&a.signal.removeEventListener("abort",u)}),s.send(void 0===a._bodyInit?null:a._bodyInit)}))}E.polyfill=!0,n.fetch||(n.fetch=E,n.Headers=d,n.Request=v,n.Response=_),e.Headers=d,e.Request=v,e.Response=_,e.fetch=E,Object.defineProperty(e,"__esModule",{value:!0})}({}),o.fetch.ponyfill=!0,delete o.fetch.polyfill;var i=o;(t=i.fetch).default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t}(xe,xe.exports);var Ee=ge,Se=_e,Te=_e,Oe="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:void 0!==me?me:self;function Ae(){return"undefined"==typeof window&&"undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node}function Ce(e,t){return"object"==typeof e&&null!==e&&Boolean(e[t])}function Pe(e,t){t=t||"";var n,r,o=[];for(r in"string"!=typeof t&&(t="?"),e)if(Ce(e,r)){if((n=e[r])||null!=n&&!isNaN(n)||(n=""),r=je(r),n=je(n),null===r||null===n)continue;o.push(r+"="+n)}return o.length?t+o.join("&"):""}function je(e){try{return encodeURIComponent(e)}catch(t){return null}}function Ne(e){return"function"==typeof e?e:"function"==typeof Oe.fetch?Oe.fetch.bind(Oe):xe.exports}Ae()&&Ne()("https://registry.npmjs.org/"+Ee.name).then((e=>e.json())).then((e=>{return t=e["dist-tags"].latest,n=t.split("."),r=Ee.version.split("."),void(n.some((function(e,t){return e>r[t]}))&&console.info(Te("New "+Ee.name+" version available "+Se.dim(Ee.version)+Se.reset(" → ")+Se.green(t)+`\nChangelog: https://github.com/${Ee.repository}/blob/master/CHANGELOG.md`,{padding:1,borderColor:"yellow"})));var t,n,r})).catch((e=>{console.error("Unable to check new driver version"),console.error(e)}));var Ie={crossGlobal:Oe,mergeObjects:function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},formatUrl:function(e,t,n){return n="object"==typeof n?Pe(n):n,[e,t?"/"===t.charAt(0)?"":"/"+t:"",n?"?"===n.charAt(0)?"":"?"+n:""].join("")},querystringify:Pe,inherits:function(e,t){if(null==e)throw new TypeError('The constructor to "inherits" must not be null or undefined');if(null==t)throw new TypeError('The super constructor to "inherits" must not be null or undefined');if(void 0===t.prototype)throw new TypeError('The super constructor to "inherits" must have a prototype');e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},isNodeEnv:Ae,getEnvVariable:function(e){if(!("undefined"==typeof process||!process||!process.env)&&null!=process.env[e])return process.env[e]},defaults:function(e,t){return void 0===e?t:e},applyDefaults:function(e,t){var n={};for(var r in e){if(!(r in t))throw new Error("No such option "+r);n[r]=e[r]}for(var o in t)o in n||(n[o]=t[o]);return n},removeNullAndUndefinedValues:function(e){var t={};for(var n in e){var r=e[n];null!=r&&(t[n]=r)}return t},removeUndefinedValues:function(e){var t={};for(var n in e){var r=e[n];void 0!==r&&(t[n]=r)}return t},checkInstanceHasProperty:Ce,getBrowserDetails:function(){var e,t,n,r=navigator.appName,o=""+parseFloat(navigator.appVersion);return-1!=(t=navigator.userAgent.indexOf("Opera"))?(r="Opera",o=navigator.userAgent.substring(t+6),-1!=(t=navigator.userAgent.indexOf("Version"))&&(o=navigator.userAgent.substring(t+8))):-1!=(t=navigator.userAgent.indexOf("MSIE"))?(r="Microsoft Internet Explorer",o=navigator.userAgent.substring(t+5)):"Netscape"==r&&-1!=navigator.userAgent.indexOf("Trident/")?(r="Microsoft Internet Explorer",o=navigator.userAgent.substring(t+5),-1!=(t=navigator.userAgent.indexOf("rv:"))&&(o=navigator.userAgent.substring(t+3))):-1!=(t=navigator.userAgent.indexOf("Chrome"))?(r="Chrome",o=navigator.userAgent.substring(t+7)):-1!=(t=navigator.userAgent.indexOf("Safari"))?(r="Safari",o=navigator.userAgent.substring(t+7),-1!=(t=navigator.userAgent.indexOf("Version"))&&(o=navigator.userAgent.substring(t+8)),-1!=navigator.userAgent.indexOf("CriOS")&&(r="Chrome")):-1!=(t=navigator.userAgent.indexOf("Firefox"))?(r="Firefox",o=navigator.userAgent.substring(t+8)):(e=navigator.userAgent.lastIndexOf(" ")+1)<(t=navigator.userAgent.lastIndexOf("/"))&&(r=navigator.userAgent.substring(e,t),o=navigator.userAgent.substring(t+1),r.toLowerCase()==r.toUpperCase()&&(r=navigator.appName)),-1!=(n=o.indexOf(";"))&&(o=o.substring(0,n)),-1!=(n=o.indexOf(" "))&&(o=o.substring(0,n)),-1!=(n=o.indexOf(")"))&&(o=o.substring(0,n)),[r,o].join("-")},getBrowserOsDetails:function(){var e="unknown",t=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Chrome OS",r:/CrOS/},{s:"Linux",r:/(Linux|X11(?!.*CrOS))/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(Mac OS|MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var n in t){var r=t[n];if(r.r.test(navigator.userAgent)){e=r.s;break}}var o="unknown";switch(/Windows/.test(e)&&(o=/Windows (.*)/.exec(e)[1],e="Windows"),e){case"Mac OS":case"Mac OS X":case"Android":o=/(?:Android|Mac OS|Mac OS X|MacPPC|MacIntel|Mac_PowerPC|Macintosh) ([\.\_\d]+)/.exec(navigator.userAgent)[1];break;case"iOS":o=(o=/OS (\d+)_(\d+)_?(\d+)?/.exec(navigator.appVersion))[1]+"."+o[2]+"."+(0|o[3])}return[e,o].join("-")},getNodeRuntimeEnv:function(){var e=[{name:"Netlify",check:()=>({}.hasOwnProperty("NETLIFY_IMAGES_CDN_DOMAIN"))},{name:"Vercel",check:()=>({}.hasOwnProperty("VERCEL"))},{name:"Heroku",check:()=>({}.hasOwnProperty("PATH")&&-1!=={}.PATH.indexOf(".heroku"))},{name:"AWS Lambda",check:()=>({}.hasOwnProperty("AWS_LAMBDA_FUNCTION_VERSION"))},{name:"GCP Cloud Functions",check:()=>({}.hasOwnProperty("_")&&-1!=={}._.indexOf("google"))},{name:"GCP Compute Instances",check:()=>({}.hasOwnProperty("GOOGLE_CLOUD_PROJECT"))},{name:"Azure Cloud Functions",check:()=>({}.hasOwnProperty("WEBSITE_FUNCTIONS_AZUREMONITOR_CATEGORIES"))},{name:"Azure Compute",check:()=>({}.hasOwnProperty("ORYX_ENV_TYPE")&&{}.hasOwnProperty("WEBSITE_INSTANCE_ID")&&"AppService"==={}.ORYX_ENV_TYPE)},{name:"Mongo Stitch",check:()=>"function"==typeof Oe.StitchError},{name:"Render",check:()=>({}.hasOwnProperty("RENDER_SERVICE_ID"))},{name:"Begin",check:()=>({}.hasOwnProperty("BEGIN_DATA_SCOPE_ID"))}].find((e=>e.check()));return e?e.name:"unknown"},resolveFetch:Ne},Re=Ie;function ke(e){this.raw=e}ke.prototype._isFaunaExpr=!0,ke.prototype.toJSON=function(){return this.raw},ke.prototype.toFQL=function(){return qe(this.raw)};var De=["Do","Call","Union","Intersection","Difference","Equals","Add","BitAnd","BitOr","BitXor","Divide","Max","Min","Modulo","Multiply","Subtract","LT","LTE","GT","GTE","And","Or"],Be={containsstrregex:"ContainsStrRegex",endswith:"EndsWith",findstr:"FindStr",findstrregex:"FindStrRegex",gt:"GT",gte:"GTE",is_nonempty:"is_non_empty",lowercase:"LowerCase",lt:"LT",lte:"LTE",ltrim:"LTrim",ngram:"NGram",rtrim:"RTrim",regexescape:"RegexEscape",replacestr:"ReplaceStr",replacestrregex:"ReplaceStrRegex",startswith:"StartsWith",substring:"SubString",titlecase:"TitleCase",uppercase:"UpperCase"};function Me(e){return e instanceof ke||Re.checkInstanceHasProperty(e,"_isFaunaExpr")}function Fe(e){return"{"+Object.keys(e).map((function(t){return'"'+t+'": '+qe(e[t])})).join(", ")+"}"}function Le(e,t){return e.map((function(e){return t(e)})).join(", ")}var qe=function(e,t){if(Me(e)){if("value"in e)return e.toString();e=e.raw}if(null===e)return"null";switch(typeof e){case"string":return JSON.stringify(e);case"symbol":case"number":case"boolean":return e.toString();case"undefined":return"undefined"}if(Array.isArray(e)){var n=Le(e,qe);return-1!=De.indexOf(t)?n:"["+n+"]"}if("match"in e){var r=qe(e.match),o=e.terms||[];return Me(o)&&(o=o.raw),Array.isArray(o)&&0==o.length?"Match("+r+")":Array.isArray(o)?"Match("+r+", ["+Le(o,qe)+"])":"Match("+r+", "+qe(o)+")"}if("paginate"in e){if(1===Object.keys(e).length)return"Paginate("+qe(e.paginate)+")";var i=Object.assign({},e);return delete i.paginate,"Paginate("+qe(e.paginate)+", "+Fe(i)+")"}if("let"in e&&"in"in e){return"Let("+(Array.isArray(e.let)?"["+Le(e.let,Fe)+"]":Fe(e.let))+", "+qe(e.in)+")"}if("object"in e)return Fe(e.object);if("merge"in e)return e.lambda?"Merge("+qe(e.merge)+", "+qe(e.with)+", "+qe(e.lambda)+")":"Merge("+qe(e.merge)+", "+qe(e.with)+")";if("lambda"in e)return"Lambda("+qe(e.lambda)+", "+qe(e.expr)+")";if("filter"in e)return"Filter("+qe(e.collection)+", "+qe(e.filter)+")";if("call"in e)return"Call("+qe(e.call)+", "+qe(e.arguments)+")";if("map"in e)return"Map("+qe(e.collection)+", "+qe(e.map)+")";if("foreach"in e)return"Foreach("+qe(e.collection)+", "+qe(e.foreach)+")";var a=Object.keys(e),s=a[0];s=function(e){return e in Be&&(e=Be[e]),e.split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join("")}(s);var u=a.filter((t=>null!==e[t]||a.length>1)).map((t=>qe(e[t],s))).join(", ");return s+"("+u+")"};ke.toString=qe;var Ue=ke,We=Ie;function $e(e,t,n){Error.call(this),this.name=e,this.message=t,this.description=n}function He(e){$e.call(this,"InvalidValue",e)}function Ve(e,t,n,r){var o,i,a=`${r} function requires ${o=e,i=t,null===i?"at least "+o:null===o?"up to "+i:o===i?o:"from "+o+" to "+i} argument(s) but ${n} were given`,s=`For more info, see the docs: https://docs.fauna.com/fauna/current/api/fql/functions/${r.toLowerCase()}`;$e.call(this,"InvalidArity",`${a}\n${s}`),this.min=e,this.max=t,this.actual=n}function Ge(e,t){var n=t.responseContent.errors,r=0===n.length?'(empty "errors")':n[0].code,o=0===n.length?'(empty "errors")':n[0].description;$e.call(this,e,r,o),this.requestResult=t}function Je(e){Ge.call(this,"BadRequest",e)}function Xe(e){Ge.call(this,"Unauthorized",e)}function ze(e){Ge.call(this,"PermissionDenied",e)}function Ye(e){Ge.call(this,"NotFound",e)}function Qe(e){Ge.call(this,"MethodNotAllowed",e)}function Ke(e){Ge.call(this,"TooManyRequests",e)}function Ze(e){Ge.call(this,"InternalError",e)}function et(e){Ge.call(this,"UnavailableError",e)}function tt(e,t,n){$e.call(this,e,t,n)}function nt(e){$e.call(this,"StreamsNotSupported","streams not supported",e)}function rt(e){var t=e.data||{};$e.call(this,"StreamErrorEvent",t.code,t.description),this.event=e}function ot(e,t){$e.call(this,"ClientClosed",e,t)}We.inherits($e,Error),We.inherits(He,$e),We.inherits(Ve,$e),We.inherits(Ge,$e),Ge.prototype.errors=function(){return this.requestResult.responseContent.errors},Ge.raiseForStatusCode=function(e){var t=e.statusCode;if(t<200||t>=300)switch(t){case 400:throw new Je(e);case 401:throw new Xe(e);case 403:throw new ze(e);case 404:throw new Ye(e);case 405:throw new Qe(e);case 429:throw new Ke(e);case 500:throw new Ze(e);case 503:throw new et(e);default:throw new Ge("UnknownError",e)}},We.inherits(Je,Ge),We.inherits(Xe,Ge),We.inherits(ze,Ge),We.inherits(Ye,Ge),We.inherits(Qe,Ge),We.inherits(Ke,Ge),We.inherits(Ze,Ge),We.inherits(et,Ge),We.inherits(tt,$e),We.inherits(nt,tt),We.inherits(rt,tt),We.inherits(ot,$e);for(var it={FaunaError:$e,ClientClosed:ot,FaunaHTTPError:Ge,InvalidValue:He,InvalidArity:Ve,BadRequest:Je,Unauthorized:Xe,PermissionDenied:ze,NotFound:Ye,MethodNotAllowed:Qe,TooManyRequests:Ke,InternalError:Ze,UnavailableError:et,StreamError:tt,StreamsNotSupported:nt,StreamErrorEvent:rt},at={byteLength:function(e){var t=pt(e),n=t[0],r=t[1];return 3*(n+r)/4-r},toByteArray:function(e){var t,n,r=pt(e),o=r[0],i=r[1],a=new ct(function(e,t,n){return 3*(t+n)/4-n}(0,o,i)),s=0,u=i>0?o-4:o;for(n=0;n<u;n+=4)t=ut[e.charCodeAt(n)]<<18|ut[e.charCodeAt(n+1)]<<12|ut[e.charCodeAt(n+2)]<<6|ut[e.charCodeAt(n+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=255&t;2===i&&(t=ut[e.charCodeAt(n)]<<2|ut[e.charCodeAt(n+1)]>>4,a[s++]=255&t);1===i&&(t=ut[e.charCodeAt(n)]<<10|ut[e.charCodeAt(n+1)]<<4|ut[e.charCodeAt(n+2)]>>2,a[s++]=t>>8&255,a[s++]=255&t);return a},fromByteArray:function(e){for(var t,n=e.length,r=n%3,o=[],i=16383,a=0,s=n-r;a<s;a+=i)o.push(ht(e,a,a+i>s?s:a+i));1===r?(t=e[n-1],o.push(st[t>>2]+st[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],o.push(st[t>>10]+st[t>>4&63]+st[t<<2&63]+"="));return o.join("")}},st=[],ut=[],ct="undefined"!=typeof Uint8Array?Uint8Array:Array,lt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ft=0,dt=lt.length;ft<dt;++ft)st[ft]=lt[ft],ut[lt.charCodeAt(ft)]=ft;function pt(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function ht(e,t,n){for(var r,o,i=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(st[(o=r)>>18&63]+st[o>>12&63]+st[o>>6&63]+st[63&o]);return i.join("")}ut["-".charCodeAt(0)]=62,ut["_".charCodeAt(0)]=63;var mt=at,yt=be,wt=it,bt=Ue,vt=Ie,gt=vt.isNodeEnv()?_e:null,_t=gt&&gt.inspect.custom,xt=gt?gt.inspect:JSON.stringify;function Et(){}function St(e,t,n){if(!e)throw new wt.InvalidValue("id cannot be null or undefined");this.value={id:e},t&&(this.value.collection=t),n&&(this.value.database=n)}Et.prototype._isFaunaValue=!0,vt.inherits(Et,bt),St.prototype._isFaunaRef=!0,vt.inherits(St,Et),Object.defineProperty(St.prototype,"collection",{get:function(){return this.value.collection}}),Object.defineProperty(St.prototype,"class",{get:yt((function(){return this.value.collection}),"class is deprecated, use collection instead")}),Object.defineProperty(St.prototype,"database",{get:function(){return this.value.database}}),Object.defineProperty(St.prototype,"id",{get:function(){return this.value.id}}),St.prototype.toJSON=function(){return{"@ref":this.value}},Nt(St,(function(){var e={collections:"Collection",databases:"Database",indexes:"Index",functions:"Function",roles:"Role",access_providers:"AccessProvider"},t=function(e){return void 0===e.collection},n=function(r){if(t(r)){var o=void 0!==r.database?r.database.toString():"";return"access_providers"===r.id?"AccessProviders("+o+")":r.id.charAt(0).toUpperCase()+r.id.slice(1)+"("+o+")"}if(t(r.collection)){var i=e[r.collection.id];if(void 0!==i){o=void 0!==r.database?", "+r.database.toString():"";return i+'("'+r.id+'"'+o+")"}}return"Ref("+n(r.collection)+', "'+r.id+'")'};return n(this)})),St.prototype.valueOf=function(){return this.value},St.prototype.equals=function(e){return(e instanceof St||vt.checkInstanceHasProperty(e,"_isFaunaRef"))&&this.id===e.id&&(void 0===this.collection&&void 0===e.collection||this.collection.equals(e.collection))&&(void 0===this.database&&void 0===e.database||this.database.equals(e.database))};var Tt={COLLECTIONS:new St("collections"),INDEXES:new St("indexes"),DATABASES:new St("databases"),FUNCTIONS:new St("functions"),ROLES:new St("roles"),KEYS:new St("keys"),ACCESS_PROVIDERS:new St("access_providers")};function Ot(e){this.value=e}function At(e){if(e instanceof Date)e=e.toISOString();else if("Z"!==e.charAt(e.length-1))throw new wt.InvalidValue("Only allowed timezone is 'Z', got: "+e);this.value=e}function Ct(e){e instanceof Date&&(e=e.toISOString().slice(0,10)),this.value=e}function Pt(e){if(e instanceof ArrayBuffer)this.value=new Uint8Array(e);else if("string"==typeof e)this.value=mt.toByteArray(e);else{if(!(e instanceof Uint8Array))throw new wt.InvalidValue("Bytes type expect argument to be either Uint8Array|ArrayBuffer|string, got: "+xt(e));this.value=e}}function jt(e){this.value=e}function Nt(e,t){e.prototype.toString=t,e.prototype.inspect=t,_t&&(e.prototype[_t]=t)}Tt.fromName=function(e){switch(e){case"collections":return Tt.COLLECTIONS;case"indexes":return Tt.INDEXES;case"databases":return Tt.DATABASES;case"functions":return Tt.FUNCTIONS;case"roles":return Tt.ROLES;case"keys":return Tt.KEYS;case"access_providers":return Tt.ACCESS_PROVIDERS}return new St(e)},vt.inherits(Ot,Et),Nt(Ot,(function(){return bt.toString(this.value)})),Ot.prototype.toJSON=function(){return{"@set":this.value}},vt.inherits(At,Et),Object.defineProperty(At.prototype,"date",{get:function(){return new Date(this.value)}}),Nt(At,(function(){return'Time("'+this.value+'")'})),At.prototype.toJSON=function(){return{"@ts":this.value}},vt.inherits(Ct,Et),Object.defineProperty(Ct.prototype,"date",{get:function(){return new Date(this.value)}}),Nt(Ct,(function(){return'Date("'+this.value+'")'})),Ct.prototype.toJSON=function(){return{"@date":this.value}},vt.inherits(Pt,Et),Nt(Pt,(function(){return'Bytes("'+mt.fromByteArray(this.value)+'")'})),Pt.prototype.toJSON=function(){return{"@bytes":mt.fromByteArray(this.value)}},vt.inherits(jt,Et),Nt(jt,(function(){return"Query("+bt.toString(this.value)+")"})),jt.prototype.toJSON=function(){return{"@query":this.value}};var It={Value:Et,Ref:St,Native:Tt,SetRef:Ot,FaunaTime:At,FaunaDate:Ct,Bytes:Pt,Query:jt},Rt=Object.getOwnPropertySymbols,kt=Object.prototype.hasOwnProperty,Dt=Object.prototype.propertyIsEnumerable;
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/function Bt(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var Mt=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(o){return!1}}()?Object.assign:function(e,t){for(var n,r,o=Bt(e),i=1;i<arguments.length;i++){for(var a in n=Object(arguments[i]))kt.call(n,a)&&(o[a]=n[a]);if(Rt){r=Rt(n);for(var s=0;s<r.length;s++)Dt.call(n,r[s])&&(o[r[s]]=n[r[s]])}}return o},Ft=we,Lt=be,qt=Ue,Ut=it,Wt=It,$t=Mt,Ht=Ie;function Vt(e){return Yt.exact(1,arguments,Vt.name),new qt({var:en(e)})}var Gt=function(e){return Yt.exact(1,arguments,Gt.name),new qt({object:tn(e)})};function Jt(){switch(Yt.between(1,2,arguments,Jt.name),arguments.length){case 1:var e=arguments[0];if("function"==typeof e)return Xt(e);if(e instanceof qt||Ht.checkInstanceHasProperty(e,"_isFaunaExpr"))return e;throw new Ut.InvalidValue("Lambda function takes either a Function or an Expr.");case 2:var t=arguments[0],n=arguments[1];return zt(t,n)}}function Xt(e){var t=Ft(e);switch(t.length){case 0:throw new Ut.InvalidValue("Provided Function must take at least 1 argument.");case 1:return zt(t[0],e(Vt(t[0])));default:return zt(t,e.apply(null,t.map((function(e){return Vt(e)}))))}}function zt(e,t){return new qt({lambda:en(e),expr:en(t)})}function Yt(e,t,n,r){if(null!==e&&n.length<e||null!==t&&n.length>t)throw new Ut.InvalidArity(e,t,n.length,r)}function Qt(e,t){for(var n in t){var r=t[n];null!=r&&(e[n]=r)}return e}function Kt(e){var t=Array.isArray(e)?e:Array.prototype.slice.call(e);return 1===e.length?e[0]:t}function Zt(e){var t=[];return t.push.apply(t,e),t}function en(e){return Yt.exact(1,arguments,en.name),null===e?null:e instanceof qt||Ht.checkInstanceHasProperty(e,"_isFaunaExpr")?e:"symbol"==typeof e?e.toString().replace(/Symbol\((.*)\)/,(function(e,t){return t})):"function"==typeof e?Jt(e):Array.isArray(e)?new qt(e.map((function(e){return en(e)}))):e instanceof Uint8Array||e instanceof ArrayBuffer?new Wt.Bytes(e):"object"==typeof e?new qt({object:tn(e)}):e}function tn(e){if(null!==e){var t={};return Object.keys(e).forEach((function(n){t[n]=en(e[n])})),t}return null}Yt.exact=function(e,t,n){Yt(e,e,t,n)},Yt.max=function(e,t,n){Yt(null,e,t,n)},Yt.min=function(e,t,n){Yt(e,null,t,n)},Yt.between=function(e,t,n,r){Yt(e,t,n,r)};var nn={Ref:function e(){switch(Yt.between(1,2,arguments,e.name),arguments.length){case 1:return new qt({"@ref":en(arguments[0])});case 2:return new qt({ref:en(arguments[0]),id:en(arguments[1])})}},Bytes:function e(t){return Yt.exact(1,arguments,e.name),new Wt.Bytes(t)},Abort:function e(t){return Yt.exact(1,arguments,e.name),new qt({abort:en(t)})},At:function e(t,n){return Yt.exact(2,arguments,e.name),new qt({at:en(t),expr:en(n)})},Let:function e(t,n){Yt.exact(2,arguments,e.name);var r=[];if(r=Array.isArray(t)?t.map((function(e){return tn(e)})):Object.keys(t).filter((function(e){return void 0!==t[e]})).map((function(e){var n={};return n[e]=en(t[e]),n})),"function"==typeof n)if(Array.isArray(t)){var o=[];t.forEach((function(e){Object.keys(e).forEach((function(e){o.push(Vt(e))}))})),n=n.apply(null,o)}else n=n.apply(null,Object.keys(t).map((function(e){return Vt(e)})));return new qt({let:r,in:en(n)})},Var:Vt,If:function e(t,n,r){return Yt.exact(3,arguments,e.name),new qt({if:en(t),then:en(n),else:en(r)})},Do:function e(){Yt.min(1,arguments,e.name);var t=Zt(arguments);return new qt({do:en(t)})},Object:Gt,Lambda:Jt,Call:function e(t){Yt.min(1,arguments,e.name);var n=Zt(arguments);return n.shift(),new qt({call:en(t),arguments:en(Kt(n))})},Query:function e(t){return Yt.exact(1,arguments,e.name),new qt({query:en(t)})},Map:function e(t,n){return Yt.exact(2,arguments,e.name),new qt({map:en(n),collection:en(t)})},Foreach:function e(t,n){return Yt.exact(2,arguments,e.name),new qt({foreach:en(n),collection:en(t)})},Filter:function e(t,n){return Yt.exact(2,arguments,e.name),new qt({filter:en(n),collection:en(t)})},Take:function e(t,n){return Yt.exact(2,arguments,e.name),new qt({take:en(t),collection:en(n)})},Drop:function e(t,n){return Yt.exact(2,arguments,e.name),new qt({drop:en(t),collection:en(n)})},Prepend:function e(t,n){return Yt.exact(2,arguments,e.name),new qt({prepend:en(t),collection:en(n)})},Append:function e(t,n){return Yt.exact(2,arguments,e.name),new qt({append:en(t),collection:en(n)})},IsEmpty:function e(t){return Yt.exact(1,arguments,e.name),new qt({is_empty:en(t)})},IsNonEmpty:function e(t){return Yt.exact(1,arguments,e.name),new qt({is_nonempty:en(t)})},IsNumber:function e(t){return Yt.exact(1,arguments,e.name),new qt({is_number:en(t)})},IsDouble:function e(t){return Yt.exact(1,arguments,e.name),new qt({is_double:en(t)})},IsInteger:function e(t){return Yt.exact(1,arguments,e.name),new qt({is_integer:en(t)})},IsBoolean:function e(t){return Yt.exact(1,arguments,e.name),new qt({is_boolean:en(t)})},IsNull:function e(t){return Yt.exact(1,arguments,e.name),new qt({is_null:en(t)})},IsBytes:function e(t){return Yt.exact(1,arguments,e.name),new qt({is_bytes:en(t)})},IsTimestamp:function e(t){return Yt.exact(1,arguments,e.name),new qt({is_timestamp:en(t)})},IsDate:function e(t){return Yt.exact(1,arguments,e.name),new qt({is_date:en(t)})},IsString:function e(t){return Yt.exact(1,arguments,e.name),new qt({is_string:en(t)})},IsArray:function e(t){return Yt.exact(1,arguments,e.name),new qt({is_array:en(t)})},IsObject:function e(t){return Yt.exact(1,arguments,e.name),new qt({is_object:en(t)})},IsRef:function e(t){return Yt.exact(1,arguments,e.name),new qt({is_ref:en(t)})},IsSet:function e(t){return Yt.exact(1,arguments,e.name),new qt({is_set:en(t)})},IsDoc:function e(t){return Yt.exact(1,arguments,e.name),new qt({is_doc:en(t)})},IsLambda:function e(t){return Yt.exact(1,arguments,e.name),new qt({is_lambda:en(t)})},IsCollection:function e(t){return Yt.exact(1,arguments,e.name),new qt({is_collection:en(t)})},IsDatabase:function e(t){return Yt.exact(1,arguments,e.name),new qt({is_database:en(t)})},IsIndex:function e(t){return Yt.exact(1,arguments,e.name),new qt({is_index:en(t)})},IsFunction:function e(t){return Yt.exact(1,arguments,e.name),new qt({is_function:en(t)})},IsKey:function e(t){return Yt.exact(1,arguments,e.name),new qt({is_key:en(t)})},IsToken:function e(t){return Yt.exact(1,arguments,e.name),new qt({is_token:en(t)})},IsCredentials:function e(t){return Yt.exact(1,arguments,e.name),new qt({is_credentials:en(t)})},IsRole:function e(t){return Yt.exact(1,arguments,e.name),new qt({is_role:en(t)})},Get:function e(t,n){return Yt.between(1,2,arguments,e.name),n=Ht.defaults(n,null),new qt(Qt({get:en(t)},{ts:en(n)}))},KeyFromSecret:function e(t){return Yt.exact(1,arguments,e.name),new qt({key_from_secret:en(t)})},Reduce:function e(t,n,r){return Yt.exact(3,arguments,e.name),new qt({reduce:en(t),initial:en(n),collection:en(r)})},Paginate:function e(t,n){return Yt.between(1,2,arguments,e.name),n=Ht.defaults(n,{}),new qt($t({paginate:en(t)},tn(n)))},Exists:function e(t,n){return Yt.between(1,2,arguments,e.name),n=Ht.defaults(n,null),new qt(Qt({exists:en(t)},{ts:en(n)}))},Create:function e(t,n){return Yt.between(1,2,arguments,e.name),new qt({create:en(t),params:en(n)})},Update:function e(t,n){return Yt.exact(2,arguments,e.name),new qt({update:en(t),params:en(n)})},Replace:function e(t,n){return Yt.exact(2,arguments,e.name),new qt({replace:en(t),params:en(n)})},Delete:function e(t){return Yt.exact(1,arguments,e.name),new qt({delete:en(t)})},Insert:function e(t,n,r,o){return Yt.exact(4,arguments,e.name),new qt({insert:en(t),ts:en(n),action:en(r),params:en(o)})},Remove:function e(t,n,r){return Yt.exact(3,arguments,e.name),new qt({remove:en(t),ts:en(n),action:en(r)})},CreateClass:Lt((function e(t){return Yt.exact(1,arguments,e.name),new qt({create_class:en(t)})}),"CreateClass() is deprecated, use CreateCollection() instead"),CreateCollection:function e(t){return Yt.exact(1,arguments,e.name),new qt({create_collection:en(t)})},CreateDatabase:function e(t){return Yt.exact(1,arguments,e.name),new qt({create_database:en(t)})},CreateIndex:function e(t){return Yt.exact(1,arguments,e.name),new qt({create_index:en(t)})},CreateKey:function e(t){return Yt.exact(1,arguments,e.name),new qt({create_key:en(t)})},CreateFunction:function e(t){return Yt.exact(1,arguments,e.name),new qt({create_function:en(t)})},CreateRole:function e(t){return Yt.exact(1,arguments,e.name),new qt({create_role:en(t)})},CreateAccessProvider:function e(t){return Yt.exact(1,arguments,e.name),new qt({create_access_provider:en(t)})},Singleton:function e(t){return Yt.exact(1,arguments,e.name),new qt({singleton:en(t)})},Events:function e(t){return Yt.exact(1,arguments,e.name),new qt({events:en(t)})},Match:function e(t){Yt.min(1,arguments,e.name);var n=Zt(arguments);return n.shift(),new qt({match:en(t),terms:en(Kt(n))})},Union:function e(){return Yt.min(1,arguments,e.name),new qt({union:en(Kt(arguments))})},Merge:function e(t,n,r){return Yt.between(2,3,arguments,e.name),new qt(Qt({merge:en(t),with:en(n)},{lambda:en(r)}))},Intersection:function e(){return Yt.min(1,arguments,e.name),new qt({intersection:en(Kt(arguments))})},Difference:function e(){return Yt.min(1,arguments,e.name),new qt({difference:en(Kt(arguments))})},Distinct:function e(t){return Yt.exact(1,arguments,e.name),new qt({distinct:en(t)})},Join:function e(t,n){return Yt.exact(2,arguments,e.name),new qt({join:en(t),with:en(n)})},Range:function e(t,n,r){return Yt.exact(3,arguments,e.name),new qt({range:en(t),from:en(n),to:en(r)})},Login:function e(t,n){return Yt.exact(2,arguments,e.name),new qt({login:en(t),params:en(n)})},Logout:function e(t){return Yt.exact(1,arguments,e.name),new qt({logout:en(t)})},Identify:function e(t,n){return Yt.exact(2,arguments,e.name),new qt({identify:en(t),password:en(n)})},Identity:Lt((function e(){return Yt.exact(0,arguments,e.name),new qt({identity:null})}),"Identity() is deprecated, use CurrentIdentity() instead"),CurrentIdentity:function e(){return Yt.exact(0,arguments,e.name),new qt({current_identity:null})},HasIdentity:Lt((function e(){return Yt.exact(0,arguments,e.name),new qt({has_identity:null})}),"HasIdentity() is deprecated, use HasCurrentIdentity() instead"),HasCurrentIdentity:function e(){return Yt.exact(0,arguments,e.name),new qt({has_current_identity:null})},CurrentToken:function e(){return Yt.exact(0,arguments,e.name),new qt({current_token:null})},HasCurrentToken:function e(){return Yt.exact(0,arguments,e.name),new qt({has_current_token:null})},Concat:function e(t,n){return Yt.min(1,arguments,e.name),n=Ht.defaults(n,null),new qt(Qt({concat:en(t)},{separator:en(n)}))},Casefold:function e(t,n){return Yt.min(1,arguments,e.name),new qt(Qt({casefold:en(t)},{normalizer:en(n)}))},ContainsStr:function e(t,n){return Yt.exact(2,arguments,e.name),new qt({containsstr:en(t),search:en(n)})},ContainsStrRegex:function e(t,n){return Yt.exact(2,arguments,e.name),new qt({containsstrregex:en(t),pattern:en(n)})},StartsWith:function e(t,n){return Yt.exact(2,arguments,e.name),new qt({startswith:en(t),search:en(n)})},EndsWith:function e(t,n){return Yt.exact(2,arguments,e.name),new qt({endswith:en(t),search:en(n)})},FindStr:function e(t,n,r){return Yt.between(2,3,arguments,e.name),r=Ht.defaults(r,null),new qt(Qt({findstr:en(t),find:en(n)},{start:en(r)}))},FindStrRegex:function e(t,n,r,o){return Yt.between(2,4,arguments,e.name),r=Ht.defaults(r,null),new qt(Qt({findstrregex:en(t),pattern:en(n)},{start:en(r),num_results:en(o)}))},Length:function e(t){return Yt.exact(1,arguments,e.name),new qt({length:en(t)})},LowerCase:function e(t){return Yt.exact(1,arguments,e.name),new qt({lowercase:en(t)})},LTrim:function e(t){return Yt.exact(1,arguments,e.name),new qt({ltrim:en(t)})},NGram:function e(t,n,r){return Yt.between(1,3,arguments,e.name),n=Ht.defaults(n,null),r=Ht.defaults(r,null),new qt(Qt({ngram:en(t)},{min:en(n),max:en(r)}))},Repeat:function e(t,n){return Yt.between(1,2,arguments,e.name),n=Ht.defaults(n,null),new qt(Qt({repeat:en(t)},{number:en(n)}))},ReplaceStr:function e(t,n,r){return Yt.exact(3,arguments,e.name),new qt({replacestr:en(t),find:en(n),replace:en(r)})},ReplaceStrRegex:function e(t,n,r,o){return Yt.between(3,4,arguments,e.name),o=Ht.defaults(o,null),new qt(Qt({replacestrregex:en(t),pattern:en(n),replace:en(r)},{first:en(o)}))},RegexEscape:function e(t){return Yt.exact(1,arguments,e.name),new qt({regexescape:en(t)})},RTrim:function e(t){return Yt.exact(1,arguments,e.name),new qt({rtrim:en(t)})},Space:function e(t){return Yt.exact(1,arguments,e.name),new qt({space:en(t)})},SubString:function e(t,n,r){return Yt.between(1,3,arguments,e.name),n=Ht.defaults(n,null),r=Ht.defaults(r,null),new qt(Qt({substring:en(t)},{start:en(n),length:en(r)}))},TitleCase:function e(t){return Yt.exact(1,arguments,e.name),new qt({titlecase:en(t)})},Trim:function e(t){return Yt.exact(1,arguments,e.name),new qt({trim:en(t)})},UpperCase:function e(t){return Yt.exact(1,arguments,e.name),new qt({uppercase:en(t)})},Format:function e(t){Yt.min(1,arguments,e.name);var n=Zt(arguments);return n.shift(),new qt({format:en(t),values:en(Kt(n))})},Time:function e(t){return Yt.exact(1,arguments,e.name),new qt({time:en(t)})},TimeAdd:function e(t,n,r){return Yt.exact(3,arguments,e.name),new qt({time_add:en(t),offset:en(n),unit:en(r)})},TimeSubtract:function e(t,n,r){return Yt.exact(3,arguments,e.name),new qt({time_subtract:en(t),offset:en(n),unit:en(r)})},TimeDiff:function e(t,n,r){return Yt.exact(3,arguments,e.name),new qt({time_diff:en(t),other:en(n),unit:en(r)})},Epoch:function e(t,n){return Yt.exact(2,arguments,e.name),new qt({epoch:en(t),unit:en(n)})},Date:function e(t){return Yt.exact(1,arguments,e.name),new qt({date:en(t)})},Now:function e(){return Yt.exact(0,arguments,e.name),new qt({now:en(null)})},NextId:Lt((function e(){return Yt.exact(0,arguments,e.name),new qt({next_id:null})}),"NextId() is deprecated, use NewId() instead"),NewId:function e(){return Yt.exact(0,arguments,e.name),new qt({new_id:null})},Database:function e(t,n){switch(Yt.between(1,2,arguments,e.name),arguments.length){case 1:return new qt({database:en(t)});case 2:return new qt({database:en(t),scope:en(n)})}},Index:function e(t,n){switch(Yt.between(1,2,arguments,e.name),arguments.length){case 1:return new qt({index:en(t)});case 2:return new qt({index:en(t),scope:en(n)})}},Class:Lt((function e(t,n){switch(Yt.between(1,2,arguments,e.name),arguments.length){case 1:return new qt({class:en(t)});case 2:return new qt({class:en(t),scope:en(n)})}}),"Class() is deprecated, use Collection() instead"),Collection:function e(t,n){switch(Yt.between(1,2,arguments,e.name),arguments.length){case 1:return new qt({collection:en(t)});case 2:return new qt({collection:en(t),scope:en(n)})}},Function:function e(t,n){switch(Yt.between(1,2,arguments,e.name),arguments.length){case 1:return new qt({function:en(t)});case 2:return new qt({function:en(t),scope:en(n)})}},Role:function e(t,n){return Yt.between(1,2,arguments,e.name),n=Ht.defaults(n,null),new qt(Qt({role:en(t)},{scope:en(n)}))},AccessProviders:function e(t){return Yt.max(1,arguments,e.name),t=Ht.defaults(t,null),new qt({access_providers:en(t)})},Classes:Lt((function e(t){return Yt.max(1,arguments,e.name),t=Ht.defaults(t,null),new qt({classes:en(t)})}),"Classes() is deprecated, use Collections() instead"),Collections:function e(t){return Yt.max(1,arguments,e.name),t=Ht.defaults(t,null),new qt({collections:en(t)})},Databases:function e(t){return Yt.max(1,arguments,e.name),t=Ht.defaults(t,null),new qt({databases:en(t)})},Indexes:function e(t){return Yt.max(1,arguments,e.name),t=Ht.defaults(t,null),new qt({indexes:en(t)})},Functions:function e(t){return Yt.max(1,arguments,e.name),t=Ht.defaults(t,null),new qt({functions:en(t)})},Roles:function e(t){return Yt.max(1,arguments,e.name),t=Ht.defaults(t,null),new qt({roles:en(t)})},Keys:function e(t){return Yt.max(1,arguments,e.name),t=Ht.defaults(t,null),new qt({keys:en(t)})},Tokens:function e(t){return Yt.max(1,arguments,e.name),t=Ht.defaults(t,null),new qt({tokens:en(t)})},Credentials:function e(t){return Yt.max(1,arguments,e.name),t=Ht.defaults(t,null),new qt({credentials:en(t)})},Equals:function e(){return Yt.min(1,arguments,e.name),new qt({equals:en(Kt(arguments))})},Contains:Lt((function e(t,n){return Yt.exact(2,arguments,e.name),new qt({contains:en(t),in:en(n)})}),"Contains() is deprecated, use ContainsPath() instead"),ContainsPath:function e(t,n){return Yt.exact(2,arguments,e.name),new qt({contains_path:en(t),in:en(n)})},ContainsField:function e(t,n){return Yt.exact(2,arguments,e.name),new qt({contains_field:en(t),in:en(n)})},ContainsValue:function e(t,n){return Yt.exact(2,arguments,e.name),new qt({contains_value:en(t),in:en(n)})},Select:function e(t,n,r){Yt.between(2,3,arguments,e.name);var o={select:en(t),from:en(n)};return void 0!==r&&(o.default=en(r)),new qt(o)},SelectAll:Lt((function e(t,n){return Yt.exact(2,arguments,e.name),new qt({select_all:en(t),from:en(n)})}),"SelectAll() is deprecated. Avoid use."),Abs:function e(t){return Yt.exact(1,arguments,e.name),new qt({abs:en(t)})},Add:function e(){return Yt.min(1,arguments,e.name),new qt({add:en(Kt(arguments))})},BitAnd:function e(){return Yt.min(1,arguments,e.name),new qt({bitand:en(Kt(arguments))})},BitNot:function e(t){return Yt.exact(1,arguments,e.name),new qt({bitnot:en(t)})},BitOr:function e(){return Yt.min(1,arguments,e.name),new qt({bitor:en(Kt(arguments))})},BitXor:function e(){return Yt.min(1,arguments,e.name),new qt({bitxor:en(Kt(arguments))})},Ceil:function e(t){return Yt.exact(1,arguments,e.name),new qt({ceil:en(t)})},Divide:function e(){return Yt.min(1,arguments,e.name),new qt({divide:en(Kt(arguments))})},Floor:function e(t){return Yt.exact(1,arguments,e.name),new qt({floor:en(t)})},Max:function e(){return Yt.min(1,arguments,e.name),new qt({max:en(Kt(arguments))})},Min:function e(){return Yt.min(1,arguments,e.name),new qt({min:en(Kt(arguments))})},Modulo:function e(){return Yt.min(1,arguments,e.name),new qt({modulo:en(Kt(arguments))})},Multiply:function e(){return Yt.min(1,arguments,e.name),new qt({multiply:en(Kt(arguments))})},Round:function e(t,n){return Yt.min(1,arguments,e.name),n=Ht.defaults(n,null),new qt(Qt({round:en(t)},{precision:en(n)}))},Subtract:function e(){return Yt.min(1,arguments,e.name),new qt({subtract:en(Kt(arguments))})},Sign:function e(t){return Yt.exact(1,arguments,e.name),new qt({sign:en(t)})},Sqrt:function e(t){return Yt.exact(1,arguments,e.name),new qt({sqrt:en(t)})},Trunc:function e(t,n){return Yt.min(1,arguments,e.name),n=Ht.defaults(n,null),new qt(Qt({trunc:en(t)},{precision:en(n)}))},Count:function e(t){return Yt.exact(1,arguments,e.name),new qt({count:en(t)})},Sum:function e(t){return Yt.exact(1,arguments,e.name),new qt({sum:en(t)})},Mean:function e(t){return Yt.exact(1,arguments,e.name),new qt({mean:en(t)})},Any:function e(t){return Yt.exact(1,arguments,e.name),new qt({any:en(t)})},All:function e(t){return Yt.exact(1,arguments,e.name),new qt({all:en(t)})},Acos:function e(t){return Yt.exact(1,arguments,e.name),new qt({acos:en(t)})},Asin:function e(t){return Yt.exact(1,arguments,e.name),new qt({asin:en(t)})},Atan:function e(t){return Yt.exact(1,arguments,e.name),new qt({atan:en(t)})},Cos:function e(t){return Yt.exact(1,arguments,e.name),new qt({cos:en(t)})},Cosh:function e(t){return Yt.exact(1,arguments,e.name),new qt({cosh:en(t)})},Degrees:function e(t){return Yt.exact(1,arguments,e.name),new qt({degrees:en(t)})},Exp:function e(t){return Yt.exact(1,arguments,e.name),new qt({exp:en(t)})},Hypot:function e(t,n){return Yt.min(1,arguments,e.name),n=Ht.defaults(n,null),new qt(Qt({hypot:en(t)},{b:en(n)}))},Ln:function e(t){return Yt.exact(1,arguments,e.name),new qt({ln:en(t)})},Log:function e(t){return Yt.exact(1,arguments,e.name),new qt({log:en(t)})},Pow:function e(t,n){return Yt.min(1,arguments,e.name),n=Ht.defaults(n,null),new qt(Qt({pow:en(t)},{exp:en(n)}))},Radians:function e(t){return Yt.exact(1,arguments,e.name),new qt({radians:en(t)})},Sin:function e(t){return Yt.exact(1,arguments,e.name),new qt({sin:en(t)})},Sinh:function e(t){return Yt.exact(1,arguments,e.name),new qt({sinh:en(t)})},Tan:function e(t){return Yt.exact(1,arguments,e.name),new qt({tan:en(t)})},Tanh:function e(t){return Yt.exact(1,arguments,e.name),new qt({tanh:en(t)})},LT:function e(){return Yt.min(1,arguments,e.name),new qt({lt:en(Kt(arguments))})},LTE:function e(){return Yt.min(1,arguments,e.name),new qt({lte:en(Kt(arguments))})},GT:function e(){return Yt.min(1,arguments,e.name),new qt({gt:en(Kt(arguments))})},GTE:function e(){return Yt.min(1,arguments,e.name),new qt({gte:en(Kt(arguments))})},And:function e(){return Yt.min(1,arguments,e.name),new qt({and:en(Kt(arguments))})},Or:function e(){return Yt.min(1,arguments,e.name),new qt({or:en(Kt(arguments))})},Not:function e(t){return Yt.exact(1,arguments,e.name),new qt({not:en(t)})},ToString:function e(t){return Yt.exact(1,arguments,e.name),new qt({to_string:en(t)})},ToNumber:function e(t){return Yt.exact(1,arguments,e.name),new qt({to_number:en(t)})},ToObject:function e(t){return Yt.exact(1,arguments,e.name),new qt({to_object:en(t)})},ToArray:function e(t){return Yt.exact(1,arguments,e.name),new qt({to_array:en(t)})},ToDouble:function e(t){return Yt.exact(1,arguments,e.name),new qt({to_double:en(t)})},ToInteger:function e(t){return Yt.exact(1,arguments,e.name),new qt({to_integer:en(t)})},ToTime:function e(t){return Yt.exact(1,arguments,e.name),new qt({to_time:en(t)})},ToSeconds:function e(t){return Yt.exact(1,arguments,e.name),new qt({to_seconds:en(t)})},ToMicros:function e(t){return Yt.exact(1,arguments,e.name),new qt({to_micros:en(t)})},ToMillis:function e(t){return Yt.exact(1,arguments,e.name),new qt({to_millis:en(t)})},DayOfMonth:function e(t){return Yt.exact(1,arguments,e.name),new qt({day_of_month:en(t)})},DayOfWeek:function e(t){return Yt.exact(1,arguments,e.name),new qt({day_of_week:en(t)})},DayOfYear:function e(t){return Yt.exact(1,arguments,e.name),new qt({day_of_year:en(t)})},Second:function e(t){return Yt.exact(1,arguments,e.name),new qt({second:en(t)})},Minute:function e(t){return Yt.exact(1,arguments,e.name),new qt({minute:en(t)})},Hour:function e(t){return Yt.exact(1,arguments,e.name),new qt({hour:en(t)})},Month:function e(t){return Yt.exact(1,arguments,e.name),new qt({month:en(t)})},Year:function e(t){return Yt.exact(1,arguments,e.name),new qt({year:en(t)})},ToDate:function e(t){return Yt.exact(1,arguments,e.name),new qt({to_date:en(t)})},MoveDatabase:function e(t,n){return Yt.exact(2,arguments,e.name),new qt({move_database:en(t),to:en(n)})},Documents:function e(t){return Yt.exact(1,arguments,e.name),new qt({documents:en(t)})},Reverse:function e(t){return Yt.exact(1,arguments,e.name),new qt({reverse:en(t)})},AccessProvider:function e(t){return Yt.exact(1,arguments,e.name),new qt({access_provider:en(t)})},wrap:en},rn=It;function on(e){return JSON.parse(e,an)}function an(e,t){if("object"!=typeof t||null===t)return t;if("@ref"in t){var n=t["@ref"];if(!("collection"in n)&&!("database"in n))return rn.Native.fromName(n.id);var r=an("collection",n.collection),o=an("database",n.database);return new rn.Ref(n.id,r,o)}return"@obj"in t?t["@obj"]:"@set"in t?new rn.SetRef(t["@set"]):"@ts"in t?new rn.FaunaTime(t["@ts"]):"@date"in t?new rn.FaunaDate(t["@date"]):"@bytes"in t?new rn.Bytes(t["@bytes"]):"@query"in t?new rn.Query(t["@query"]):t}var sn={toJSON:function(e,t){return(t=void 0!==t&&t)?JSON.stringify(e,null,"  "):JSON.stringify(e)},parseJSON:on,parseJSONStreaming:function(e){var t=[];try{t.push(on(e)),e=""}catch(o){for(;;){var n=e.indexOf("\n")+1;if(n<=0)break;var r=e.slice(0,n).trim();r.length>0&&t.push(on(r)),e=e.slice(n)}}return{values:t,buffer:e}}},un=nn,cn=Mt;function ln(e,t,n,r){void 0===n&&(n={}),void 0===r&&(r={}),this.reverse=!1,this.params={},this.before=void 0,this.after=void 0,cn(this.params,n);var o=this.params.cursor||this.params;"before"in o?(this.before=o.before,delete o.before):"after"in o&&(this.after=o.after,delete o.after),this.options={},cn(this.options,r),this.client=e,this.set=t,this._faunaFunctions=[]}ln.prototype.map=function(e){var t=this._clone();return t._faunaFunctions.push((function(t){return un.Map(t,e)})),t},ln.prototype.filter=function(e){var t=this._clone();return t._faunaFunctions.push((function(t){return un.Filter(t,e)})),t},ln.prototype.each=function(e){return this._retrieveNextPage(this.after,!1).then(this._consumePages(e,!1))},ln.prototype.eachReverse=function(e){return this._retrieveNextPage(this.before,!0).then(this._consumePages(e,!0))},ln.prototype.previousPage=function(){return this._retrieveNextPage(this.before,!0).then(this._adjustCursors.bind(this))},ln.prototype.nextPage=function(){return this._retrieveNextPage(this.after,!1).then(this._adjustCursors.bind(this))},ln.prototype._adjustCursors=function(e){return void 0!==e.after&&(this.after=e.after),void 0!==e.before&&(this.before=e.before),e.data},ln.prototype._consumePages=function(e,t){var n=this;return function(r){var o,i=[];return r.data.forEach((function(e){e.document&&(e.instance=e.document),e.value&&e.value.document&&(e.value.instance=e.value.document),i.push(e)})),e(i),void 0!==(o=t?r.before:r.after)?n._retrieveNextPage(o,t).then(n._consumePages(e,t)):Promise.resolve()}},ln.prototype._retrieveNextPage=function(e,t){var n={};cn(n,this.params);var r=n.cursor||n;void 0!==e?t?r.before=e:r.after=e:t&&(r.before=null);var o=un.Paginate(this.set,n);return this._faunaFunctions.length>0&&this._faunaFunctions.forEach((function(e){o=e(o)})),this.client.query(o,this.options)},ln.prototype._clone=function(){return Object.create(ln.prototype,{client:{value:this.client},set:{value:this.set},_faunaFunctions:{value:this._faunaFunctions},before:{value:this.before},after:{value:this.after}})};var fn=ln;function dn(e,t,n,r,o,i,a,s,u,c,l){this.method=e,this.path=t,this.query=n,this.requestRaw=r,this.requestContent=o,this.responseRaw=i,this.responseContent=a,this.statusCode=s,this.responseHeaders=u,this.startTime=c,this.endTime=l}Object.defineProperty(dn.prototype,"timeTaken",{get:function(){return this.endTime-this.startTime}});var pn=dn,hn=Ie;function mn(e){Error.call(this),this.message=e||"Request aborted due to timeout",this.isTimeoutError=!0}function yn(e){Error.call(this),this.message=e||"Request aborted",this.isAbortError=!0}hn.inherits(mn,Error),hn.inherits(yn,Error);var wn={TimeoutError:mn,AbortError:yn},bn=_e,vn=wn,gn=it,_n=Ie;function xn(e){this.type="http2",this._sessionMap={},this._http2SessionIdleTime=e.http2SessionIdleTime,this._closed=!1}xn.prototype._resolveSessionFor=function(e,t){var n=t?"stream::"+e:e;if(this._sessionMap[n])return this._sessionMap[n];var r=this,o=null,i=0,a=function(){r._cleanupSessionFor(e,t)},s=function(){o&&(clearTimeout(o),o=null)},u=bn.connect(e).once("error",a).once("goaway",a),c={session:u,close:function(e){return s(),e||t?(u.destroy(),Promise.resolve()):new Promise((function(e){u.close(e)}))},onRequestStart:function(){++i,s()},onRequestEnd:function(){var e=0===--i,t=r._closed||u.closed||u.destroyed;e&&!t&&(s(),r._http2SessionIdleTime!==1/0&&(o=setTimeout((function(){o=null,0===i&&a()}),r._http2SessionIdleTime)))}};return this._sessionMap[n]=c,c},xn.prototype._cleanupSessionFor=function(e,t){var n=t?"stream::"+e:e;this._sessionMap[n]&&(this._sessionMap[n].session.close(),delete this._sessionMap[n])},xn.prototype.execute=function(e){if(this._closed)return Promise.reject(new gn.ClientClosed("The Client has already been closed","No subsequent requests can be issued after the .close method is called. Consider creating a new Client instance"));var t=this,n=null!=e.streamConsumer;return new Promise((function(r,o){var i=!1,a=!1,s=function(e){i=!0,r(e)},u=function(t){var r=function(e){if("ERR_HTTP2_GOAWAY_SESSION"===e.code||"ERR_HTTP2_STREAM_CANCEL"===e.code)return new gn.ClientClosed("The request is aborted due to the Client#close call");return e}(t);if(i&&n)return e.streamConsumer.onError(r);i=!0,o(r)},c=function(){p.onRequestEnd(),e.signal&&e.signal.removeEventListener("abort",l)},l=function(){a=!0,c(),h.close(bn.constants.NGHTTP2_CANCEL),u(new vn.AbortError)};try{var f=("/"===e.path[0]?e.path:"/"+e.path)+_n.querystringify(e.query,"?"),d=Object.assign({},e.headers,{[bn.constants.HTTP2_HEADER_PATH]:f,[bn.constants.HTTP2_HEADER_METHOD]:e.method}),p=t._resolveSessionFor(e.origin,n),h=p.session.request(d).setEncoding("utf8").on("error",(function(e){c(),u(e)})).on("response",(function(r){var o=r[bn.constants.HTTP2_HEADER_STATUS],i=o>=200&&o<400&&n,u="";i&&s({body:"[stream]",headers:r,status:o}),h.on("data",(function(t){if(i)return e.streamConsumer.onData(t);u+=t})).on("end",(function(){if(a||c(),!i)return s({body:u,headers:r,status:o});a||t._closed||e.streamConsumer.onError(new TypeError("network error"))}))}));p.onRequestStart(),!e.signal&&e.timeout&&h.setTimeout(e.timeout,(function(){a=!0,c(),h.close(bn.constants.NGHTTP2_CANCEL),u(new vn.TimeoutError)})),e.signal&&e.signal.addEventListener("abort",l),null!=e.body&&h.write(e.body),h.end()}catch(m){t._cleanupSessionFor(e.origin,n),u(m)}}))},xn.prototype.close=function(e){e=e||{},this._closed=!0;return Promise.all(Object.values(this._sessionMap).map((function(t){return t.close(e.force)}))).then((function(){}))};var En=xn;const Sn=new WeakMap,Tn=new WeakMap;function On(e){const t=Sn.get(e);return console.assert(null!=t,"'this' is expected an Event object, but got",e),t}function An(e){null==e.passiveListener?e.event.cancelable&&(e.canceled=!0,"function"==typeof e.event.preventDefault&&e.event.preventDefault()):"undefined"!=typeof console&&"function"==typeof console.error&&console.error("Unable to preventDefault inside passive event listener invocation.",e.passiveListener)}function Cn(e,t){Sn.set(this,{eventTarget:e,event:t,eventPhase:2,currentTarget:e,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:t.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});const n=Object.keys(t);for(let r=0;r<n.length;++r){const e=n[r];e in this||Object.defineProperty(this,e,Pn(e))}}function Pn(e){return{get(){return On(this).event[e]},set(t){On(this).event[e]=t},configurable:!0,enumerable:!0}}function jn(e){return{value(){const t=On(this).event;return t[e].apply(t,arguments)},configurable:!0,enumerable:!0}}function Nn(e){if(null==e||e===Object.prototype)return Cn;let t=Tn.get(e);return null==t&&(t=function(e,t){const n=Object.keys(t);if(0===n.length)return e;function r(t,n){e.call(this,t,n)}r.prototype=Object.create(e.prototype,{constructor:{value:r,configurable:!0,writable:!0}});for(let o=0;o<n.length;++o){const i=n[o];if(!(i in e.prototype)){const e="function"==typeof Object.getOwnPropertyDescriptor(t,i).value;Object.defineProperty(r.prototype,i,e?jn(i):Pn(i))}}return r}(Nn(Object.getPrototypeOf(e)),e),Tn.set(e,t)),t}function In(e){return On(e).immediateStopped}function Rn(e,t){On(e).passiveListener=t}Cn.prototype={get type(){return On(this).event.type},get target(){return On(this).eventTarget},get currentTarget(){return On(this).currentTarget},composedPath(){const e=On(this).currentTarget;return null==e?[]:[e]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return On(this).eventPhase},stopPropagation(){const e=On(this);e.stopped=!0,"function"==typeof e.event.stopPropagation&&e.event.stopPropagation()},stopImmediatePropagation(){const e=On(this);e.stopped=!0,e.immediateStopped=!0,"function"==typeof e.event.stopImmediatePropagation&&e.event.stopImmediatePropagation()},get bubbles(){return Boolean(On(this).event.bubbles)},get cancelable(){return Boolean(On(this).event.cancelable)},preventDefault(){An(On(this))},get defaultPrevented(){return On(this).canceled},get composed(){return Boolean(On(this).event.composed)},get timeStamp(){return On(this).timeStamp},get srcElement(){return On(this).eventTarget},get cancelBubble(){return On(this).stopped},set cancelBubble(e){if(!e)return;const t=On(this);t.stopped=!0,"boolean"==typeof t.event.cancelBubble&&(t.event.cancelBubble=!0)},get returnValue(){return!On(this).canceled},set returnValue(e){e||An(On(this))},initEvent(){}},Object.defineProperty(Cn.prototype,"constructor",{value:Cn,configurable:!0,writable:!0}),"undefined"!=typeof window&&void 0!==window.Event&&(Object.setPrototypeOf(Cn.prototype,window.Event.prototype),Tn.set(window.Event.prototype,Cn));const kn=new WeakMap;function Dn(e){return null!==e&&"object"==typeof e}function Bn(e){const t=kn.get(e);if(null==t)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return t}function Mn(e,t){Object.defineProperty(e,`on${t}`,function(e){return{get(){let t=Bn(this).get(e);for(;null!=t;){if(3===t.listenerType)return t.listener;t=t.next}return null},set(t){"function"==typeof t||Dn(t)||(t=null);const n=Bn(this);let r=null,o=n.get(e);for(;null!=o;)3===o.listenerType?null!==r?r.next=o.next:null!==o.next?n.set(e,o.next):n.delete(e):r=o,o=o.next;if(null!==t){const o={listener:t,listenerType:3,passive:!1,once:!1,next:null};null===r?n.set(e,o):r.next=o}},configurable:!0,enumerable:!0}}(t))}function Fn(e){function t(){Ln.call(this)}t.prototype=Object.create(Ln.prototype,{constructor:{value:t,configurable:!0,writable:!0}});for(let n=0;n<e.length;++n)Mn(t.prototype,e[n]);return t}function Ln(){if(!(this instanceof Ln)){if(1===arguments.length&&Array.isArray(arguments[0]))return Fn(arguments[0]);if(arguments.length>0){const e=new Array(arguments.length);for(let t=0;t<arguments.length;++t)e[t]=arguments[t];return Fn(e)}throw new TypeError("Cannot call a class as a function")}kn.set(this,new Map)}Ln.prototype={addEventListener(e,t,n){if(null==t)return;if("function"!=typeof t&&!Dn(t))throw new TypeError("'listener' should be a function or an object.");const r=Bn(this),o=Dn(n),i=(o?Boolean(n.capture):Boolean(n))?1:2,a={listener:t,listenerType:i,passive:o&&Boolean(n.passive),once:o&&Boolean(n.once),next:null};let s=r.get(e);if(void 0===s)return void r.set(e,a);let u=null;for(;null!=s;){if(s.listener===t&&s.listenerType===i)return;u=s,s=s.next}u.next=a},removeEventListener(e,t,n){if(null==t)return;const r=Bn(this),o=(Dn(n)?Boolean(n.capture):Boolean(n))?1:2;let i=null,a=r.get(e);for(;null!=a;){if(a.listener===t&&a.listenerType===o)return void(null!==i?i.next=a.next:null!==a.next?r.set(e,a.next):r.delete(e));i=a,a=a.next}},dispatchEvent(e){if(null==e||"string"!=typeof e.type)throw new TypeError('"event.type" should be a string.');const t=Bn(this),n=e.type;let r=t.get(n);if(null==r)return!0;const o=function(e,t){return new(Nn(Object.getPrototypeOf(t)))(e,t)}(this,e);let i=null;for(;null!=r;){if(r.once?null!==i?i.next=r.next:null!==r.next?t.set(n,r.next):t.delete(n):i=r,Rn(o,r.passive?r.listener:null),"function"==typeof r.listener)try{r.listener.call(this,o)}catch(a){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(a)}else 3!==r.listenerType&&"function"==typeof r.listener.handleEvent&&r.listener.handleEvent(o);if(In(o))break;r=r.next}return Rn(o,null),function(e,t){On(e).eventPhase=t}(o,0),function(e,t){On(e).currentTarget=t}(o,null),!o.defaultPrevented}},Object.defineProperty(Ln.prototype,"constructor",{value:Ln,configurable:!0,writable:!0}),"undefined"!=typeof window&&void 0!==window.EventTarget&&Object.setPrototypeOf(Ln.prototype,window.EventTarget.prototype);class qn extends Ln{constructor(){throw super(),new TypeError("AbortSignal cannot be constructed directly")}get aborted(){const e=Un.get(this);if("boolean"!=typeof e)throw new TypeError("Expected 'this' to be an 'AbortSignal' object, but got "+(null===this?"null":typeof this));return e}}Mn(qn.prototype,"abort");const Un=new WeakMap;Object.defineProperties(qn.prototype,{aborted:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(qn.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});class Wn{constructor(){$n.set(this,function(){const e=Object.create(qn.prototype);return Ln.call(e),Un.set(e,!1),e}())}get signal(){return Hn(this)}abort(){var e;e=Hn(this),!1===Un.get(e)&&(Un.set(e,!0),e.dispatchEvent({type:"abort"}))}}const $n=new WeakMap;function Hn(e){const t=$n.get(e);if(null==t)throw new TypeError("Expected 'this' to be an 'AbortController' object, but got "+(null===e?"null":typeof e));return t}Object.defineProperties(Wn.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(Wn.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"});const Vn="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0;Vn&&(void 0===Vn.AbortController&&(Vn.AbortController=Wn),void 0===Vn.AbortSignal&&(Vn.AbortSignal=qn));var Gn=Ie,Jn=it,Xn=wn;function zn(e){e=e||{},this.type="fetch",this._closed=!1,this._fetch=Gn.resolveFetch(e.fetch),this._pendingRequests=new Map,Gn.isNodeEnv()&&e.keepAlive&&(this._keepAliveEnabledAgent=new(e.isHttps,_e).Agent({keepAlive:!0}))}function Yn(e,t){return e&&"AbortError"===e.name?t?t():new Xn.AbortError:e}zn.prototype.execute=function(e){if(this._closed)return Promise.reject(new Jn.ClientClosed("The Client has already been closed","No subsequent requests can be issued after the .close method is called. Consider creating a new Client instance"));var t=this,n=null,r=null!=e.streamConsumer,o=!e.signal&&!!e.timeout,i=new AbortController,a={isStreaming:r,isAbortedByClose:!1,onComplete:null};t._pendingRequests.set(i,a);var s=function(){t._pendingRequests.delete(i),e.signal&&e.signal.removeEventListener("abort",c),a.onComplete&&a.onComplete()},u=function(){n&&clearTimeout(n)},c=function(){i.abort()};return o&&(n=setTimeout((function(){n=null,i.abort()}),e.timeout)),e.signal&&e.signal.addEventListener("abort",c),this._fetch(Gn.formatUrl(e.origin,e.path,e.query),{method:e.method,headers:e.headers,body:e.body,agent:this._keepAliveEnabledAgent,signal:i.signal}).then((function(t){u();var n=function(e){var t={};for(var n of e.entries()){var r=n[0],o=n[1];t[r]=o}return t}(t.headers);return r&&t.ok?(function(e,t,n){var r=function(e){n(),t.onError(Yn(e))};if(Gn.isNodeEnv())return void e.body.on("error",r).on("data",t.onData).on("end",(function(){n(),t.onError(new TypeError("network error"))}));try{let a=function(){return o.read().then((function(e){if(!e.done){var r=i.decode(e.value,{stream:!0});return t.onData(r),a()}n(),t.onError(new TypeError("network error"))}))};var o=e.body.getReader(),i=new TextDecoder("utf-8");a().catch(r)}catch(a){throw new Jn.StreamsNotSupported("Please, consider providing a Fetch API-compatible function with streamable response bodies. "+a)}}(t,e.streamConsumer,s),{body:"[stream]",headers:n,status:t.status}):(s(),t.text().then((function(e){return{body:e,headers:n,status:t.status}})))})).catch((function(e){return u(),s(),Promise.reject(Yn(e,(function(){return!r&&a.isAbortedByClose?new Jn.ClientClosed("The request is aborted due to the Client#close call with the force=true option"):o?new Xn.TimeoutError:new Xn.AbortError})))}))},zn.prototype.close=function(e){e=e||{},this._closed=!0;var t=[];this._pendingRequests.forEach((function(n,r){if(n.isStreaming||e.force)return n.isAbortedByClose=!0,r.abort();t.push(new Promise((function(e){n.onComplete=e})))}));return Promise.all(t).then((function(){}))};var Qn=zn,Kn=ge;const{getBrowserOsDetails:Zn}=Ie;var er=Ie,tr=wn;function nr(e){var t="https"===e.scheme;e.port||(e.port=t?443:80);var n=!e.fetch&&er.isNodeEnv()&&function(){try{return!0}catch(e){return!1}}();this._adapter=n?new En({http2SessionIdleTime:e.http2SessionIdleTime}):new Qn({isHttps:t,fetch:e.fetch,keepAlive:e.keepAlive}),this._baseUrl=e.scheme+"://"+e.domain+":"+e.port,this._secret=e.secret,this._headers=Object.assign({},e.headers,function(){var e,t={driver:["javascript",Kn.version].join("-")};try{e=me instanceof ServiceWorkerGlobalScope}catch(o){e=!1}try{if(er.isNodeEnv()){t.runtime=["nodejs",process.version].join("-"),t.env=er.getNodeRuntimeEnv();var n=_e;t.os=[n.platform(),n.release()].join("-")}else e?t.runtime="Service Worker":(t.runtime=er.getBrowserDetails(),t.env="browser",t.os=Zn())}catch(i){}var r={"X-FaunaDB-API-Version":Kn.apiVersion};er.isNodeEnv()&&(r["X-Driver-Env"]=Object.keys(t).map((e=>[e,t[e].toLowerCase()].join("="))).join("; "));return r}()),this._queryTimeout=e.queryTimeout,this._lastSeen=null,this._timeout=Math.floor(1e3*e.timeout)}nr.prototype.getLastTxnTime=function(){return this._lastSeen},nr.prototype.syncLastTxnTime=function(e){(null==this._lastSeen||this._lastSeen<e)&&(this._lastSeen=e)},nr.prototype.close=function(e){return this._adapter.close(e)},nr.prototype.execute=function(e){if((e=e||{}).streamConsumer&&("function"!=typeof e.streamConsumer.onData||"function"!=typeof e.streamConsumer.onError))return Promise.reject(new TypeError('Invalid "streamConsumer" provided'));var t=e.secret||this._secret,n=e.queryTimeout||this._queryTimeout,r=this._headers;return r.Authorization=t&&function(e){return"Bearer "+e}(t),r["X-Last-Seen-Txn"]=this._lastSeen,r["X-Query-Timeout"]=n,this._adapter.execute({origin:this._baseUrl,path:e.path||"/",query:e.query,method:e.method||"GET",headers:er.removeNullAndUndefinedValues(r),body:e.body,signal:e.signal,timeout:this._timeout,streamConsumer:e.streamConsumer})};var rr={HttpClient:nr,TimeoutError:tr.TimeoutError,AbortError:tr.AbortError},or=pn,ir=it,ar=sn,sr=rr,ur=nn,cr=Ie,lr=["start","error","version","history_rewrite"],fr=lr.concat(["snapshot"]);function dr(e,t,n,r){n=cr.applyDefaults(n,{fields:null}),this._client=e,this._onEvent=r,this._query=ur.wrap(t),this._urlParams=n.fields?{fields:n.fields.join(",")}:null,this._abort=new AbortController,this._state="idle"}function pr(e){this._allowedEvents=e,this._listeners={}}function hr(e,t){this._client=e,this._dispatcher=t}dr.prototype.snapshot=function(){var e=this;e._client.query(ur.Get(e._query)).then((function(t){e._onEvent({type:"snapshot",event:t})})).catch((function(t){e._onEvent({type:"error",event:t})}))},dr.prototype.subscribe=function(){var e=this;if("idle"!==e._state)throw new Error("Subscription#start should not be called several times, consider instantiating a new stream instead.");e._state="open";var t=JSON.stringify(e._query),n=Date.now(),r="";function o(t){t instanceof sr.AbortError||e._onEvent({type:"error",event:t})}e._client._http.execute({method:"POST",path:"stream",body:t,query:e._urlParams,signal:this._abort.signal,streamConsumer:{onError:o,onData:function(t){var n=ar.parseJSONStreaming(r+t);r=n.buffer,n.values.forEach((function(t){void 0!==t.txn&&e._client.syncLastTxnTime(t.txn),"error"===t.event?o(new ir.StreamErrorEvent(t)):e._onEvent(t)}))}}}).then((function(r){var o,i=Date.now();try{o=ar.parseJSON(r.body)}catch(s){o=r.body}var a=new or("POST","stream",e._urlParams,t,e._query,r.body,o,r.status,r.headers,n,i);e._client._handleRequestResult(r,a)})).catch(o)},dr.prototype.close=function(){"closed"!==this._state&&(this._state="closed",this._abort.abort())},pr.prototype.on=function(e,t){if(-1===this._allowedEvents.indexOf(e))throw new Error("Unknown event type: "+e);void 0===this._listeners[e]&&(this._listeners[e]=[]),this._listeners[e].push(t)},pr.prototype.dispatch=function(e){var t=this._listeners[e.type];if(t)for(var n=0;n<t.length;n++)t[n].call(null,e.event,e)},hr.prototype.on=function(e,t){return this._dispatcher.on(e,t),this},hr.prototype.start=function(){return this._client.subscribe(),this},hr.prototype.close=function(){this._client.close()};var mr=ge,yr=fn,wr=pn,br=it,vr=rr,gr=sn,_r=nn,xr={StreamAPI:function(e){var t=function(t,n){var r=new pr(lr);return new hr(new dr(e,t,n,(function(e){r.dispatch(e)})),r)};return t.document=function(t,n){var r=[],o=!0,i=new pr(fr),a=new dr(e,t,n,(function(e){switch(e.type){case"start":i.dispatch(e),a.snapshot();break;case"snapshot":!function(e){i.dispatch(e);for(var t=0;t<r.length;t++){var n=r[t];n.txn>e.event.ts&&i.dispatch(n)}o=!1,r=null}(e);break;case"error":i.dispatch(e);break;default:o?r.push(e):i.dispatch(e)}}));return new hr(a,i)},t}},Er=Ie,Sr=It;function Tr(e){var t,n,r,o=(t=Er.getEnvVariable("FAUNADB_HTTP2_SESSION_IDLE_TIME"),n="Infinity"===t?1/0:parseInt(t,10),{shouldOverride:r=!isNaN(n),value:r?n:500});e=Er.applyDefaults(e,{domain:"db.fauna.com",scheme:"https",port:null,secret:null,timeout:60,observer:null,keepAlive:!0,headers:{},fetch:void 0,queryTimeout:null,http2SessionIdleTime:o.value}),o.shouldOverride&&(e.http2SessionIdleTime=o.value),this._observer=e.observer,this._http=new vr.HttpClient(e),this.stream=xr.StreamAPI(this)}Tr.apiVersion=mr.apiVersion,Tr.prototype.query=function(e,t){return this._execute("POST","",_r.wrap(e),null,t)},Tr.prototype.paginate=function(e,t,n){return t=Er.defaults(t,{}),n=Er.defaults(n,{}),new yr(this,e,t,n)},Tr.prototype.ping=function(e,t){return this._execute("GET","ping",null,{scope:e,timeout:t})},Tr.prototype.getLastTxnTime=function(){return this._http.getLastTxnTime()},Tr.prototype.syncLastTxnTime=function(e){this._http.syncLastTxnTime(e)},Tr.prototype.close=function(e){return this._http.close(e)},Tr.prototype._execute=function(e,t,n,r,o){r=Er.defaults(r,null),(t instanceof Sr.Ref||Er.checkInstanceHasProperty(t,"_isFaunaRef"))&&(t=t.value),null!==r&&(r=Er.removeUndefinedValues(r));var i=Date.now(),a=this,s=["GET","HEAD"].indexOf(e)>=0?void 0:JSON.stringify(n);return this._http.execute(Object.assign({},o,{path:t,query:r,method:e,body:s})).then((function(u){var c=Date.now(),l=gr.parseJSON(u.body),f=new wr(e,t,r,s,n,u.body,l,u.status,u.headers,i,c);return a._handleRequestResult(u,f,o),l.resource}))},Tr.prototype._handleRequestResult=function(e,t,n){null!=e.headers["x-txn-time"]&&this.syncLastTxnTime(parseInt(e.headers["x-txn-time"],10)),[this._observer,n&&n.observer].forEach((e=>{"function"==typeof e&&e(t,this)})),br.FaunaHTTPError.raiseForStatusCode(t)};var Or=sn;function Ar(e){var t=e.query,n=e.method,r=e.path,o=e.requestContent,i=e.responseHeaders,a=e.responseContent,s=e.statusCode,u=e.timeTaken,c="";function l(e){c+=e}return l("Fauna "+n+" /"+r+function(e){if(null==e)return"";var t=Object.keys(e);if(0===t.length)return"";return"?"+t.map((function(t){return t+"="+e[t]})).join("&")}(t)+"\n"),null!=o&&l("  Request JSON: "+Cr(o)+"\n"),l("  Response headers: "+Cr(i)+"\n"),l("  Response JSON: "+Cr(a)+"\n"),l("  Response ("+s+"): Network latency "+u+"ms\n"),c}function Cr(e){return Or.toJSON(e,!0).split("\n").join("\n  ")}Ie.mergeObjects({Client:Tr,Expr:Ue,PageHelper:fn,RequestResult:pn,clientLogger:{logger:function(e){return function(t,n){return e(Ar(t),n)}},showRequestResult:Ar},errors:it,values:It,query:nn,parseJSON:sn.parseJSON},nn);var Pr={};function jr(e,t){const n="undefined"!=typeof localStorage;function r(e,t){n&&localStorage.setItem(e,JSON.stringify(t))}if(!Pr[e]){const o=he(t,(t=>{const r=n?localStorage.getItem(e):null;if(r&&t(JSON.parse(r)),n){const n=n=>{n.key===e&&t(n.newValue?JSON.parse(n.newValue):null)};return window.addEventListener("storage",n),()=>window.removeEventListener("storage",n)}})),{subscribe:i,set:a}=o;Pr[e]={set(t){r(e,t),a(t)},update(t){const n=t(function(e){let t;return c(e,(e=>t=e))(),t}(o));r(e,n),a(n)},subscribe:i}}return Pr[e]}export{F as A,t as B,he as C,E as D,b as E,e as F,l as G,h as H,A as I,f as J,p as K,jr as L,u as M,_ as N,i as O,W as P,D as Q,o as R,de as S,P as a,C as b,N as c,g as d,x as e,v as f,I as g,k as h,fe as i,ae as j,T as k,O as l,se as m,R as n,ue as o,oe as p,ie as q,ee as r,a as s,S as t,re as u,ce as v,te as w,ne as x,q as y,L as z};
